(function(){"use strict";var e={9578:function(e,t,o){var a=o(5130),n=o(6768);const s={id:"app"};function l(e,t,o,a,l,r){const i=(0,n.g2)("TopNavbar"),d=(0,n.g2)("SidebarPage"),c=(0,n.g2)("SidebarBackend"),u=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",s,[!r.isBackend&&r.showTopNavbar?((0,n.uX)(),(0,n.Wv)(i,{key:0})):(0,n.Q3)("",!0),r.isBackend||e.$route.meta.hideSidebar?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(d,{key:1})),r.isBackend&&!e.$route.meta.hideSidebar?((0,n.uX)(),(0,n.Wv)(c,{key:2,isSidebarActive:l.isSidebarActive,onToggleSidebar:r.toggleSidebar},null,8,["isSidebarActive","onToggleSidebar"])):(0,n.Q3)("",!0),(0,n.bF)(u)])}var r=o(4232);const i={class:"navbar"},d={class:"navbar-title"},c={key:0,class:"export-container"},u={key:0,class:"export-menu"};function p(e,t,o,a,s,l){return(0,n.uX)(),(0,n.CE)("nav",i,[(0,n.Lk)("div",d,(0,r.v_)(l.currentRouteName),1),l.isHomePage?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("button",{class:"export-button",onClick:t[0]||(t[0]=(...e)=>l.toggleExportMenu&&l.toggleExportMenu(...e))},"åŒ¯å‡º"),s.showExportMenu?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("button",{onClick:t[1]||(t[1]=e=>l.exportFile("pdf"))},"åŒ¯å‡ºPDF"),(0,n.Lk)("button",{onClick:t[2]||(t[2]=e=>l.exportFile("excel"))},"åŒ¯å‡ºExcel")])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])}var m={data(){return{showExportMenu:!1}},computed:{currentRouteName(){return this.$route.name},isHomePage(){return"é¦–é "===this.$route.name}},methods:{toggleExportMenu(){this.showExportMenu=!this.showExportMenu},exportFile(e){this.$emit("export",e),this.showExportMenu=!1}}},h=o(1241);const k=(0,h.A)(m,[["render",p],["__scopeId","data-v-1ed8ac7f"]]);var b=k;const f=e=>((0,n.Qi)("data-v-1d0bf5f1"),e=e(),(0,n.jt)(),e),v={class:"sidebar-header"},L={key:0},g=f((()=>(0,n.Lk)("span",{class:"text"},"å„€éŒ¶æ¿ç®¡ç†",-1))),C=f((()=>(0,n.Lk)("span",{class:"text"},"å€‹äººè³‡è¨Š",-1))),y=f((()=>(0,n.Lk)("span",{class:"text"},"å¸³è™Ÿè¨­å®š",-1))),w=f((()=>(0,n.Lk)("span",{class:"text"},"æ­·å²ç´€éŒ„",-1))),_=f((()=>(0,n.Lk)("span",{class:"text"},"ç™»å‡º",-1)));function M(e,t,o,s,l,i){const d=(0,n.g2)("font-awesome-icon"),c=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:(0,r.C4)(["sidebar",{open:l.isSidebarOpen}])},[(0,n.Lk)("div",v,[(0,n.bF)(d,{icon:"user",class:"icon"}),l.isSidebarOpen?((0,n.uX)(),(0,n.CE)("span",L,"ç‹æ›‰æ˜")):(0,n.Q3)("",!0),(0,n.Lk)("span",{class:"toggle-btn",onClick:t[0]||(t[0]=(...e)=>i.toggleSidebar&&i.toggleSidebar(...e))},"â˜°")]),(0,n.bF)(c,{to:"/frontend/home","data-tooltip":"å„€éŒ¶æ¿ç®¡ç†"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{icon:"tachometer-alt",class:"icon"}),g])),_:1}),(0,n.bF)(c,{to:"/frontend/profile","data-tooltip":"å€‹äººè³‡è¨Š"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{icon:"user",class:"icon"}),C])),_:1}),(0,n.bF)(c,{to:"/frontend/accountsettings","data-tooltip":"å¸³è™Ÿè¨­å®š"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{icon:"users",class:"icon"}),y])),_:1}),(0,n.bF)(c,{to:"/frontend/history","data-tooltip":"æ­·å²ç´€éŒ„"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{icon:"history",class:"icon"}),w])),_:1}),(0,n.Lk)("a",{href:"#",onClick:t[1]||(t[1]=(0,a.D$)(((...e)=>i.confirmLogout&&i.confirmLogout(...e)),["prevent"])),"data-tooltip":"ç™»å‡º"},[(0,n.bF)(d,{icon:"sign-out-alt",class:"icon"}),_])],2),(0,n.Lk)("div",{class:(0,r.C4)(["content",{shift:l.isSidebarOpen}])},[(0,n.RG)(e.$slots,"default",{},void 0,!0)],2)])}o(4114);var E={name:"SidebarPage",data(){return{isSidebarOpen:!1}},methods:{toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen},confirmLogout(){const e=confirm("ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ");e&&this.logout()},logout(){alert("å·²ç™»å‡º"),this.$router.push("/frontend/login")}}};const P=(0,h.A)(E,[["render",M],["__scopeId","data-v-1d0bf5f1"]]);var R=P;const S=e=>((0,n.Qi)("data-v-6ffe4a4a"),e=e(),(0,n.jt)(),e),A=S((()=>(0,n.Lk)("div",{class:"hamburger-icon"},"â˜°",-1))),U=[A],V=S((()=>(0,n.Lk)("h2",null,"ç®¡ç†ä»‹é¢",-1)));function X(e,t,o,a,s,l){const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"hamburger-menu",onClick:t[0]||(t[0]=(...e)=>l.toggleSidebar&&l.toggleSidebar(...e))},U),(0,n.Lk)("div",{class:(0,r.C4)(["sidebar",{active:o.isSidebarActive}])},[V,(0,n.bF)(i,{to:"/backend/dashboard"},{default:(0,n.k6)((()=>[(0,n.eW)("å„€éŒ¶æ¿ç®¡ç†")])),_:1}),(0,n.bF)(i,{to:"/backend/user-management"},{default:(0,n.k6)((()=>[(0,n.eW)("ç”¨æˆ¶ç®¡ç†")])),_:1}),(0,n.bF)(i,{to:"/backend/role-management"},{default:(0,n.k6)((()=>[(0,n.eW)("è§’è‰²ç®¡ç†")])),_:1}),(0,n.bF)(i,{to:"/backend/history"},{default:(0,n.k6)((()=>[(0,n.eW)("æ­·å²ç´€éŒ„")])),_:1}),(0,n.bF)(i,{to:"/backend/preferences"},{default:(0,n.k6)((()=>[(0,n.eW)("å€‹äººåå¥½")])),_:1}),(0,n.bF)(i,{to:"/backend/profile"},{default:(0,n.k6)((()=>[(0,n.eW)("å€‹äººè³‡æ–™")])),_:1}),(0,n.Lk)("button",{class:"logout-btn",onClick:t[1]||(t[1]=(...e)=>l.logout&&l.logout(...e))},"ç™»å‡º")],2)])}var $={props:{isSidebarActive:{type:Boolean,default:!1}},methods:{toggleSidebar(){this.$emit("toggle-sidebar")},logout(){this.$router.push("/backend/login")}}};const F=(0,h.A)($,[["render",X],["__scopeId","data-v-6ffe4a4a"]]);var I=F,x={name:"App",components:{TopNavbar:b,SidebarPage:R,SidebarBackend:I},data(){return{isSidebarActive:!1}},computed:{isBackend(){return this.$route.path.startsWith("/backend")},showTopNavbar(){return!this.isBackend&&!this.$route.meta.hideNavbar}},methods:{toggleSidebar(){this.isSidebarActive=!this.isSidebarActive}}};const T=(0,h.A)(x,[["render",l]]);var q=T,D=o(1387);const B=e=>((0,n.Qi)("data-v-c452369e"),e=e(),(0,n.jt)(),e),J={class:"login-container"},N={class:"login-form"},Q=B((()=>(0,n.Lk)("h2",null,"ç”¨æˆ¶ç™»å…¥",-1))),W={class:"input-group"},j=B((()=>(0,n.Lk)("label",{for:"email"},"é›»å­éƒµä»¶",-1))),z={class:"input-group"},O=B((()=>(0,n.Lk)("label",{for:"password"},"å¯†ç¢¼",-1))),H={class:"input-container"},K={class:"additional-options"},Z=B((()=>(0,n.Lk)("input",{type:"submit",value:"ç™»å…¥",class:"submit-button"},null,-1))),G={id:"login-feedback",class:"feedback"};function Y(e,t,o,s,l,i){const d=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",J,[(0,n.Lk)("div",N,[Q,(0,n.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>i.handleLogin&&i.handleLogin(...e)),["prevent"]))},[(0,n.Lk)("div",W,[j,(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),required:""},null,512),[[a.Jo,l.email]])]),(0,n.Lk)("div",z,[O,(0,n.Lk)("div",H,[(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),required:""},null,512),[[a.Jo,l.password]]),(0,n.Lk)("i",{class:"fas fa-eye toggle-password",onClick:t[2]||(t[2]=e=>i.togglePasswordVisibility("password"))})])]),(0,n.Lk)("div",K,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",id:"rememberMe","onUpdate:modelValue":t[3]||(t[3]=e=>l.rememberMe=e)},null,512),[[a.lH,l.rememberMe]]),(0,n.eW)(" è¨˜ä½æˆ‘ ")]),(0,n.bF)(d,{to:"/frontend/forgot_password"},{default:(0,n.k6)((()=>[(0,n.eW)("å¿˜è¨˜å¯†ç¢¼?")])),_:1})]),Z,(0,n.Lk)("div",G,(0,r.v_)(l.loginFeedback),1)],32),(0,n.Lk)("p",null,[(0,n.eW)("é‚„æœªæ“æœ‰å¸³è™Ÿï¼Ÿ "),(0,n.bF)(d,{to:"/frontend/register"},{default:(0,n.k6)((()=>[(0,n.eW)("è¨»å†Š")])),_:1})])])])}var ee=o(4373),te={data(){return{email:"",password:"",rememberMe:!1,loginFeedback:""}},methods:{async handleLogin(){try{const e=await ee.A.post("http://127.0.0.1:8000/api/token/",{email:this.email,password:this.password});200===e.status&&(localStorage.setItem("token",e.data.access),localStorage.setItem("position",e.data.position),localStorage.setItem("branch_id",e.data.branch_id),this.rememberMe?localStorage.setItem("refreshToken",e.data.refresh):sessionStorage.setItem("refreshToken",e.data.refresh),this.loginFeedback="ç™»å…¥æˆåŠŸ",this.redirectUserBasedOnPosition())}catch(e){e.response&&e.response.data?this.loginFeedback=e.response.data.detail||"ç™»å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥æ‚¨çš„é›»å­éƒµä»¶å’Œå¯†ç¢¼":this.loginFeedback="ç™»å…¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦"}},togglePasswordVisibility(e){const t=document.getElementById(e);"password"===t.type?t.type="text":t.type="password"},redirectUserBasedOnPosition(){const e=localStorage.getItem("position");"ç¶“ç†"===e?this.$router.push("/frontend/manager_dashboard"):"å“¡å·¥"===e?this.$router.push("/frontend/employee_dashboard"):this.$router.push("/frontend/home")}}};const oe=(0,h.A)(te,[["render",Y],["__scopeId","data-v-c452369e"]]);var ae=oe;const ne=e=>((0,n.Qi)("data-v-20fb3f5e"),e=e(),(0,n.jt)(),e),se={class:"content",id:"content"},le={class:"container"},re=ne((()=>(0,n.Lk)("h2",null,"è¨»å†Š",-1))),ie=ne((()=>(0,n.Lk)("label",{for:"username"},"ç”¨æˆ¶å",-1))),de=ne((()=>(0,n.Lk)("label",{for:"email"},"é›»å­éƒµä»¶",-1))),ce=ne((()=>(0,n.Lk)("label",{for:"verification_code"},"é©—è­‰ç¢¼",-1))),ue=ne((()=>(0,n.Lk)("label",{for:"password"},"å¯†ç¢¼",-1))),pe={class:"password-container"},me=ne((()=>(0,n.Lk)("div",{class:"password-example"},"å¯†ç¢¼å¿…é ˆåŒ…å«è‡³å°‘8å€‹å­—ç¬¦ï¼Œä¸”åŒ…æ‹¬å¤§å°å¯«å­—æ¯ã€æ•¸å­—å’Œç‰¹æ®Šå­—ç¬¦ã€‚ä¾‹å¦‚ï¼šPassword@123",-1))),he=ne((()=>(0,n.Lk)("label",{for:"confirm_password"},"ç¢ºèªå¯†ç¢¼",-1))),ke={class:"password-container"},be=ne((()=>(0,n.Lk)("label",{for:"phone"},"é›»è©±è™Ÿç¢¼",-1))),fe=ne((()=>(0,n.Lk)("input",{type:"submit",value:"è¨»å†Š",class:"submit-button"},null,-1)));function ve(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",se,[(0,n.Lk)("div",le,[re,(0,n.Lk)("form",{onSubmit:t[9]||(t[9]=(0,a.D$)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[ie,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),required:""},null,512),[[a.Jo,l.username]]),de,(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>l.email=e),required:""},null,512),[[a.Jo,l.email]]),(0,n.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>i.getVerificationCode&&i.getVerificationCode(...e))},"ç²å–é©—è­‰ç¢¼"),(0,n.Lk)("div",{id:"verification-feedback",class:(0,r.C4)({feedback:!0,success:l.feedbackSuccess,error:!l.feedbackSuccess})},(0,r.v_)(l.verificationFeedback),3),ce,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"verification_code","onUpdate:modelValue":t[3]||(t[3]=e=>l.verificationCode=e),required:""},null,512),[[a.Jo,l.verificationCode]]),ue,(0,n.Lk)("div",pe,[(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[4]||(t[4]=e=>l.password=e),required:""},null,512),[[a.Jo,l.password]]),(0,n.Lk)("span",{class:"toggle-password",onClick:t[5]||(t[5]=(...e)=>i.handleTogglePassword&&i.handleTogglePassword(...e))},"ğŸ‘ï¸")]),me,he,(0,n.Lk)("div",ke,[(0,n.bo)((0,n.Lk)("input",{type:"password",id:"confirm_password","onUpdate:modelValue":t[6]||(t[6]=e=>l.confirmPassword=e),required:""},null,512),[[a.Jo,l.confirmPassword]]),(0,n.Lk)("span",{class:"toggle-password",onClick:t[7]||(t[7]=(...e)=>i.handleTogglePassword&&i.handleTogglePassword(...e))},"ğŸ‘ï¸")]),be,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"phone","onUpdate:modelValue":t[8]||(t[8]=e=>l.phone=e),required:""},null,512),[[a.Jo,l.phone]]),fe],32)])])}var Le={data(){return{username:"",email:"",password:"",confirmPassword:"",phone:"",verificationCode:"",verificationFeedback:"",feedbackSuccess:!1,csrfToken:""}},methods:{setAxiosCsrfToken(e){ee.A.defaults.headers.common["X-CSRFToken"]=e},async fetchCsrfToken(){try{const e=await ee.A.get("http://127.0.0.1:8000/frontend/register/",{withCredentials:!0});this.csrfToken=e.data.csrfToken,this.setAxiosCsrfToken(this.csrfToken)}catch(e){console.error("Failed to fetch CSRF Token:",e)}},async getVerificationCode(){if(this.validateEmail(this.email))try{const e=await ee.A.post("http://127.0.0.1:8000/frontend/send-verification-code/",{email:this.email},{headers:{"X-CSRFToken":this.csrfToken},withCredentials:!0});this.feedbackSuccess=e.data.success,this.verificationFeedback=e.data.success?"é©—è­‰ç¢¼å·²ç™¼é€åˆ°æ‚¨çš„é›»å­éƒµä»¶ï¼Œæœ‰æ•ˆæœŸé™5åˆ†é˜ã€‚":e.data.message||"ç„¡æ³•ç™¼é€é©—è­‰ç¢¼ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚"}catch(e){this.feedbackSuccess=!1,this.verificationFeedback="ç„¡æ³•ç™¼é€é©—è­‰ç¢¼ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚"}else alert("è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµä»¶åœ°å€ã€‚")},validateEmail(e){const t=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;return t.test(String(e).toLowerCase())},validatePassword(e){const t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;return t.test(e)},handleTogglePassword(e){const t=e.target.previousElementSibling;t.type="password"===t.type?"text":"password"},async handleSubmit(){if(this.password===this.confirmPassword)if(this.validatePassword(this.password))try{const e=await ee.A.post("http://127.0.0.1:8000/frontend/register/",{username:this.username,email:this.email,password:this.password,confirmPassword:this.confirmPassword,phone:this.phone,verificationCode:this.verificationCode},{headers:{"X-CSRFToken":this.csrfToken},withCredentials:!0});e.data.success?(alert("è¨»å†ŠæˆåŠŸï¼"),this.$router.push("/frontend/home")):alert(e.data.message||"è¨»å†Šå¤±æ•—ï¼Œè«‹é‡è©¦ã€‚")}catch(e){alert("è¨»å†Šå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚")}else alert("å¯†ç¢¼å¿…é ˆåŒ…å«è‡³å°‘8å€‹å­—ç¬¦ï¼Œä¸”åŒ…æ‹¬å¤§å°å¯«å­—æ¯ã€æ•¸å­—å’Œç‰¹æ®Šå­—ç¬¦ã€‚ä¾‹å¦‚ï¼šPassword@123");else alert("å¯†ç¢¼èˆ‡ç¢ºèªå¯†ç¢¼ä¸åŒ¹é…ã€‚")}},created(){this.fetchCsrfToken()}};const ge=(0,h.A)(Le,[["render",ve],["__scopeId","data-v-20fb3f5e"]]);var Ce=ge;const ye=e=>((0,n.Qi)("data-v-4bb8df9a"),e=e(),(0,n.jt)(),e),we={class:"container"},_e=ye((()=>(0,n.Lk)("h2",null,"å¿˜è¨˜å¯†ç¢¼",-1))),Me=ye((()=>(0,n.Lk)("label",{for:"email"},"é›»å­éƒµä»¶ï¼š",-1))),Ee=ye((()=>(0,n.Lk)("button",{type:"submit"},"ç™¼é€",-1)));function Pe(e,t,o,s,l,r){return(0,n.uX)(),(0,n.CE)("div",we,[_e,(0,n.Lk)("form",{onSubmit:t[1]||(t[1]=(0,a.D$)(((...e)=>r.sendPasswordReset&&r.sendPasswordReset(...e)),["prevent"]))},[Me,(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),required:""},null,512),[[a.Jo,l.email]]),Ee],32)])}var Re={name:"ForgetPasswordPage",data(){return{email:"",csrfToken:""}},methods:{setAxiosCsrfToken(e){ee.A.defaults.headers.common["X-CSRFToken"]=e},async fetchCsrfToken(){try{const e=await ee.A.get("http://127.0.0.1:8000/frontend/forgot-password/",{withCredentials:!0});this.csrfToken=e.data.csrfToken,this.setAxiosCsrfToken(this.csrfToken)}catch(e){console.error("Failed to fetch CSRF Token:",e)}},async sendPasswordReset(){if(this.email)try{const e=await ee.A.post("http://127.0.0.1:8000/frontend/forgot-password/",{email:this.email},{headers:{"X-CSRFToken":this.csrfToken},withCredentials:!0});e.data.success?(alert("å·²ç™¼é€å¯†ç¢¼é‡è¨­è«‹æ±‚è‡³æ‚¨çš„é›»å­éƒµä»¶"),this.$router.push("/frontend/reset_password")):alert(e.data.message||"æ“ä½œå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚")}catch(e){alert("æ“ä½œå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚")}else alert("è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµä»¶åœ°å€")}},created(){this.fetchCsrfToken()}};const Se=(0,h.A)(Re,[["render",Pe],["__scopeId","data-v-4bb8df9a"]]);var Ae=Se;const Ue=e=>((0,n.Qi)("data-v-0b4cc964"),e=e(),(0,n.jt)(),e),Ve={class:"home-page"},Xe={class:"branch-selection"},$e=Ue((()=>(0,n.Lk)("label",{for:"branch-select"},"é¸æ“‡åˆ†åº—:",-1))),Fe=["value"],Ie={class:"chart-controls"},xe={class:"chart-container"};function Te(e,t,o,s,l,i){const d=(0,n.g2)("TopNavbar");return(0,n.uX)(),(0,n.CE)("div",Ve,[(0,n.bF)(d,{onExport:e.exportChart},null,8,["onExport"]),(0,n.Lk)("div",Xe,[$e,(0,n.bo)((0,n.Lk)("select",{id:"branch-select","onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedBranch=e),onChange:t[1]||(t[1]=(...e)=>i.onBranchChange&&i.onBranchChange(...e))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.branches,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.branch_id,value:e.branch_id},(0,r.v_)(e.branch_name),9,Fe)))),128))],544),[[a.u1,l.selectedBranch]])]),(0,n.Lk)("div",Ie,[(0,n.Lk)("button",{onClick:t[2]||(t[2]=e=>i.setCurrentChart("RevenueChart"))},"ç‡Ÿæ¥­é¡"),(0,n.Lk)("button",{onClick:t[3]||(t[3]=e=>i.setCurrentChart("SalesChart"))},"éŠ·å”®é¡"),(0,n.Lk)("button",{onClick:t[4]||(t[4]=e=>i.setCurrentChart("InventoryChart"))},"åº«å­˜é‡")]),(0,n.Lk)("div",xe,[((0,n.uX)(),(0,n.Wv)((0,n.$y)(l.currentChart),{"branch-id":l.selectedBranch},null,8,["branch-id"]))])])}const qe={ref:"chartCanvas"};function De(e,t,o,a,s,l){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("canvas",qe,null,512)])}var Be=o(6912);Be.t1.register(Be.hE,Be.m_,Be.s$,Be.ZT,Be.No,Be.FN,Be.kc,Be.PP);var Je={name:"SalesChart",data(){return{chartData:{labels:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],datasets:[{label:"Sales",backgroundColor:"#f87979",data:[40,20,12,39,10,40,39,80,40,39,80,40]}]}}},mounted(){this.renderChart()},methods:{renderChart(){const e=this.$refs.chartCanvas.getContext("2d");new Be.t1(e,{type:"line",data:this.chartData,options:{responsive:!0,maintainAspectRatio:!1}})}}};const Ne=(0,h.A)(Je,[["render",De],["__scopeId","data-v-ba34ad74"]]);var Qe=Ne;const We={ref:"chartCanvas"};function je(e,t,o,a,s,l){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("canvas",We,null,512)])}Be.t1.register(Be.hE,Be.m_,Be.s$,Be.ZT,Be.No,Be.FN,Be.kc,Be.PP);var ze={name:"RevenueChart",data(){return{chartData:{labels:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],datasets:[{label:"Revenue",backgroundColor:"#f87979",data:[30,10,5,25,15,30,25,60,30,25,60,30]}]}}},mounted(){this.renderChart()},methods:{renderChart(){const e=this.$refs.chartCanvas.getContext("2d");new Be.t1(e,{type:"line",data:this.chartData,options:{responsive:!0,maintainAspectRatio:!1}})}}};const Oe=(0,h.A)(ze,[["render",je],["__scopeId","data-v-45aaeee3"]]);var He=Oe;const Ke={ref:"chartCanvas"};function Ze(e,t,o,a,s,l){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("canvas",Ke,null,512)])}Be.t1.register(Be.hE,Be.m_,Be.s$,Be.ZT,Be.No,Be.FN,Be.kc,Be.PP);var Ge={name:"InventoryChart",data(){return{chartData:{labels:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],datasets:[{label:"Inventory",backgroundColor:"#f87979",data:[50,25,18,45,20,50,45,100,50,45,100,50]}]}}},mounted(){this.renderChart()},methods:{renderChart(){const e=this.$refs.chartCanvas.getContext("2d");new Be.t1(e,{type:"line",data:this.chartData,options:{responsive:!0,maintainAspectRatio:!1}})}}};const Ye=(0,h.A)(Ge,[["render",Ze],["__scopeId","data-v-5a935ee6"]]);var et=Ye,tt={name:"HomePage",components:{TopNavbar:b,SalesChart:Qe,RevenueChart:He,InventoryChart:et},data(){return{currentChart:"SalesChart",branches:[],selectedBranch:null}},methods:{async fetchBranches(){try{const e=await ee.A.get("http://127.0.0.1:8000/api/branches/");this.branches=e.data,this.selectedBranch=this.branches.length>0?this.branches[0].branch_id:null}catch(e){console.error("Error fetching branches:",e)}},setCurrentChart(e){this.currentChart=e},onBranchChange(){console.log("Selected branch:",this.selectedBranch)}},async mounted(){await this.fetchBranches()}};const ot=(0,h.A)(tt,[["render",Te],["__scopeId","data-v-0b4cc964"]]);var at=ot;const nt=e=>((0,n.Qi)("data-v-4da14fdb"),e=e(),(0,n.jt)(),e),st={class:"info-container"},lt=nt((()=>(0,n.Lk)("h3",null,"å€‹äººè³‡è¨Š",-1))),rt={key:0},it={class:"button-container"},dt={key:1},ct={class:"button-container"};function ut(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:(0,r.C4)(["content",{shift:l.isSidebarOpen}]),id:"content"},[(0,n.Lk)("div",st,[lt,l.isEditing?((0,n.uX)(),(0,n.CE)("div",dt,[(0,n.Lk)("p",null,[(0,n.eW)("å¸³è™Ÿï¼š"),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.editData.username=e)},null,512),[[a.Jo,l.editData.username]])]),(0,n.Lk)("p",null,[(0,n.eW)("éƒ¨é–€ï¼š"),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.editData.department_id=e)},null,512),[[a.Jo,l.editData.department_id]])]),(0,n.Lk)("p",null,[(0,n.eW)("è·ä½ï¼š"),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.editData.position_id=e)},null,512),[[a.Jo,l.editData.position_id]])]),(0,n.Lk)("p",null,[(0,n.eW)("é›»è©±ï¼š"),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.editData.phone=e)},null,512),[[a.Jo,l.editData.phone]])]),(0,n.Lk)("p",null,[(0,n.eW)("é›»å­éƒµä»¶ï¼š"),(0,n.bo)((0,n.Lk)("input",{type:"email","onUpdate:modelValue":t[5]||(t[5]=e=>l.editData.email=e)},null,512),[[a.Jo,l.editData.email]])]),(0,n.Lk)("div",ct,[(0,n.Lk)("button",{class:"save",onClick:t[6]||(t[6]=(...e)=>i.saveProfile&&i.saveProfile(...e))},"ä¿å­˜"),(0,n.Lk)("button",{class:"cancel",onClick:t[7]||(t[7]=(...e)=>i.cancelEdit&&i.cancelEdit(...e))},"å–æ¶ˆ")])])):((0,n.uX)(),(0,n.CE)("div",rt,[(0,n.Lk)("p",null,[(0,n.eW)("å¸³è™Ÿï¼š"),(0,n.Lk)("span",null,(0,r.v_)(l.userData.username||"N/A"),1)]),(0,n.Lk)("p",null,[(0,n.eW)("éƒ¨é–€ï¼š"),(0,n.Lk)("span",null,(0,r.v_)(l.userData.department_id||"N/A"),1)]),(0,n.Lk)("p",null,[(0,n.eW)("è·ä½ï¼š"),(0,n.Lk)("span",null,(0,r.v_)(l.userData.position_id||"N/A"),1)]),(0,n.Lk)("p",null,[(0,n.eW)("é›»è©±ï¼š"),(0,n.Lk)("span",null,(0,r.v_)(l.userData.phone||"N/A"),1)]),(0,n.Lk)("p",null,[(0,n.eW)("é›»å­éƒµä»¶ï¼š"),(0,n.Lk)("span",null,(0,r.v_)(l.userData.email||"N/A"),1)]),(0,n.Lk)("div",it,[(0,n.Lk)("button",{class:"edit",onClick:t[0]||(t[0]=(...e)=>i.editProfile&&i.editProfile(...e))},"ç·¨è¼¯")])]))])],2)])}var pt={data(){return{userData:{username:"",email:"",phone:"",department_name:"",position_name:""},editData:{},isSidebarOpen:!1,isEditing:!1}},methods:{toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen},async fetchUserProfile(){try{const e=await ee.A.get("/api/frontend/profile/");this.userData=e.data}catch(e){console.error("Error fetching user profile:",e)}},editProfile(){this.editData={...this.userData},this.isEditing=!0},cancelEdit(){this.isEditing=!1},async saveProfile(){try{await ee.A.put("/api/frontend/profile/",this.editData),this.userData={...this.editData},this.isEditing=!1,alert("å€‹äººä¿¡æ¯å·²æ›´æ–°")}catch(e){console.error("Error saving profile:",e),alert("ä¿å­˜å¤±æ•—")}}},mounted(){this.fetchUserProfile()}};const mt=(0,h.A)(pt,[["render",ut],["__scopeId","data-v-4da14fdb"]]);var ht=mt;const kt=e=>((0,n.Qi)("data-v-28377fb8"),e=e(),(0,n.jt)(),e),bt={class:"account-settings-page"},ft={class:"main-panel"},vt={class:"container"},Lt={class:"account-settings"},gt=kt((()=>(0,n.Lk)("img",{class:"profile-pic",src:"https://via.placeholder.com/100",alt:"Profile Picture"},null,-1))),Ct=kt((()=>(0,n.Lk)("h3",null,"wang",-1))),yt=kt((()=>(0,n.Lk)("img",{src:"https://img.icons8.com/ios-filled/50/000000/lock.png",alt:"ä¿®æ”¹å¯†ç¢¼"},null,-1))),wt=kt((()=>(0,n.Lk)("img",{src:"https://img.icons8.com/ios-filled/50/000000/settings.png",alt:"åå¥½è¨­å®š"},null,-1)));function _t(e,t,o,a,s,l){const r=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",bt,[(0,n.Lk)("div",ft,[(0,n.Lk)("div",vt,[(0,n.Lk)("div",Lt,[gt,Ct,(0,n.bF)(r,{to:"/frontend/changepassword",class:"setting-option"},{default:(0,n.k6)((()=>[yt,(0,n.eW)(" ä¿®æ”¹å¯†ç¢¼ ")])),_:1}),(0,n.bF)(r,{to:"/frontend/preferences",class:"setting-option"},{default:(0,n.k6)((()=>[wt,(0,n.eW)(" åå¥½è¨­å®š ")])),_:1})])])])])}var Mt={name:"AccountSettings"};const Et=(0,h.A)(Mt,[["render",_t],["__scopeId","data-v-28377fb8"]]);var Pt=Et;const Rt=e=>((0,n.Qi)("data-v-495d8860"),e=e(),(0,n.jt)(),e),St={class:"change-password-container"},At=Rt((()=>(0,n.Lk)("h2",null,"ä¿®æ”¹å¯†ç¢¼",-1))),Ut={class:"input-group"},Vt=Rt((()=>(0,n.Lk)("label",{for:"currentPassword"},"åŸå¯†ç¢¼",-1))),Xt={class:"input-group"},$t=Rt((()=>(0,n.Lk)("label",{for:"newPassword"},"æ–°å¯†ç¢¼",-1))),Ft={class:"input-group"},It=Rt((()=>(0,n.Lk)("label",{for:"confirmNewPassword"},"ç¢ºèªæ–°å¯†ç¢¼",-1))),xt=Rt((()=>(0,n.Lk)("button",{type:"submit",class:"submit-button"},"æ›´æ”¹å¯†ç¢¼",-1))),Tt={id:"feedback",class:"feedback"};function qt(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",St,[At,(0,n.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>i.handleChangePassword&&i.handleChangePassword(...e)),["prevent"]))},[(0,n.Lk)("div",Ut,[Vt,(0,n.bo)((0,n.Lk)("input",{type:"password",id:"currentPassword","onUpdate:modelValue":t[0]||(t[0]=e=>l.currentPassword=e),required:""},null,512),[[a.Jo,l.currentPassword]])]),(0,n.Lk)("div",Xt,[$t,(0,n.bo)((0,n.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[1]||(t[1]=e=>l.newPassword=e),required:""},null,512),[[a.Jo,l.newPassword]])]),(0,n.Lk)("div",Ft,[It,(0,n.bo)((0,n.Lk)("input",{type:"password",id:"confirmNewPassword","onUpdate:modelValue":t[2]||(t[2]=e=>l.confirmNewPassword=e),required:""},null,512),[[a.Jo,l.confirmNewPassword]])]),xt,(0,n.Lk)("button",{type:"button",class:"cancel-button",onClick:t[3]||(t[3]=(...e)=>i.cancelChanges&&i.cancelChanges(...e))},"å–æ¶ˆè®Šæ›´"),(0,n.Lk)("div",Tt,(0,r.v_)(l.feedback),1)],32)])}var Dt={data(){return{currentPassword:"",newPassword:"",confirmNewPassword:"",feedback:""}},methods:{handleChangePassword(){this.newPassword!==this.confirmNewPassword?this.feedback="æ–°å¯†ç¢¼èˆ‡ç¢ºèªå¯†ç¢¼ä¸åŒ¹é…":this.feedback="å¯†ç¢¼å·²æ›´æ”¹"},cancelChanges(){this.feedback="æ‚¨å–æ¶ˆäº†è®Šæ›´å¯†ç¢¼"}}};const Bt=(0,h.A)(Dt,[["render",qt],["__scopeId","data-v-495d8860"]]);var Jt=Bt;const Nt=e=>((0,n.Qi)("data-v-51a8a632"),e=e(),(0,n.jt)(),e),Qt=Nt((()=>(0,n.Lk)("div",null,null,-1))),Wt=Nt((()=>(0,n.Lk)("div",null,null,-1))),jt=Nt((()=>(0,n.Lk)("div",null,null,-1))),zt=[Qt,Wt,jt],Ot={class:"content",id:"content"},Ht={class:"container"},Kt={class:"preferences"},Zt=Nt((()=>(0,n.Lk)("div",{class:"header"},"åå¥½è¨­å®š",-1))),Gt={class:"form-group"},Yt=Nt((()=>(0,n.Lk)("label",{for:"font-size"},"å­—é«”å¤§å°",-1))),eo=Nt((()=>(0,n.Lk)("option",{value:"large"},"å¤§",-1))),to=Nt((()=>(0,n.Lk)("option",{value:"medium"},"é©ä¸­",-1))),oo=Nt((()=>(0,n.Lk)("option",{value:"small"},"å°",-1))),ao=[eo,to,oo],no={class:"form-group"},so=Nt((()=>(0,n.Lk)("label",{for:"notification"},"é€šçŸ¥è¨­å®š",-1))),lo=Nt((()=>(0,n.Lk)("option",{value:"enable"},"é–‹å•Ÿé€šçŸ¥",-1))),ro=Nt((()=>(0,n.Lk)("option",{value:"disable"},"é—œé–‰é€šçŸ¥",-1))),io=[lo,ro],co={class:"form-group"},uo=Nt((()=>(0,n.Lk)("label",{for:"auto-login"},"è‡ªå‹•ç™»å…¥",-1))),po=Nt((()=>(0,n.Lk)("option",{value:"enable"},"è‡ªå‹•ç™»å…¥",-1))),mo=Nt((()=>(0,n.Lk)("option",{value:"disable"},"å–æ¶ˆè‡ªå‹•ç™»å…¥",-1))),ho=[po,mo],ko={class:"form-group"},bo=Nt((()=>(0,n.Lk)("label",{for:"authentication"},"èªè­‰è¨­å®š",-1))),fo=Nt((()=>(0,n.Lk)("option",{value:"enable"},"é–‹å•Ÿèªè­‰",-1))),vo=Nt((()=>(0,n.Lk)("option",{value:"disable"},"é—œé–‰èªè­‰",-1))),Lo=[fo,vo],go={class:"buttons"};function Co(e,t,o,s,l,r){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("button",{class:"hamburger-menu",onClick:t[0]||(t[0]=(...e)=>r.toggleMenu&&r.toggleMenu(...e))},zt),(0,n.Lk)("div",Ot,[(0,n.Lk)("div",Ht,[(0,n.Lk)("div",Kt,[Zt,(0,n.Lk)("div",Gt,[Yt,(0,n.bo)((0,n.Lk)("select",{id:"font-size","onUpdate:modelValue":t[1]||(t[1]=e=>l.fontSize=e)},ao,512),[[a.u1,l.fontSize]])]),(0,n.Lk)("div",no,[so,(0,n.bo)((0,n.Lk)("select",{id:"notification","onUpdate:modelValue":t[2]||(t[2]=e=>l.notification=e)},io,512),[[a.u1,l.notification]])]),(0,n.Lk)("div",co,[uo,(0,n.bo)((0,n.Lk)("select",{id:"auto-login","onUpdate:modelValue":t[3]||(t[3]=e=>l.autoLogin=e)},ho,512),[[a.u1,l.autoLogin]])]),(0,n.Lk)("div",ko,[bo,(0,n.bo)((0,n.Lk)("select",{id:"authentication","onUpdate:modelValue":t[4]||(t[4]=e=>l.authentication=e)},Lo,512),[[a.u1,l.authentication]])]),(0,n.Lk)("div",go,[(0,n.Lk)("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...e)=>r.cancelChanges&&r.cancelChanges(...e))},"å–æ¶ˆè®Šæ›´"),(0,n.Lk)("button",{class:"submit-button",onClick:t[6]||(t[6]=(...e)=>r.submitChanges&&r.submitChanges(...e))},"æ›´æ”¹")])])])])])}var yo={name:"PreferenceSetting",data(){return{fontSize:"medium",notification:"disable",autoLogin:"disable",authentication:"disable"}},methods:{toggleMenu(){const e=document.querySelector(".dropdown-content");e.style.display="block"===e.style.display?"none":"block"},cancelChanges(){this.fontSize="medium",this.notification="disable",this.autoLogin="disable",this.authentication="disable"},submitChanges(){const e="large"===this.fontSize?"18px":"small"===this.fontSize?"12px":"16px";document.body.style.fontSize=e,alert("åå¥½è¨­å®šå·²æ›´æ”¹")}}};const wo=(0,h.A)(yo,[["render",Co],["__scopeId","data-v-51a8a632"]]);var _o=wo;const Mo=e=>((0,n.Qi)("data-v-d60bb562"),e=e(),(0,n.jt)(),e),Eo={class:"history-page"},Po={class:"container"},Ro={key:0,class:"no-history centered-content"},So=Mo((()=>(0,n.Lk)("p",null,"æœªç™»å…¥ï¼Œç„¡ç´€éŒ„é¡¯ç¤ºã€‚",-1))),Ao=[So],Uo={key:1},Vo={class:"search-container centered-content"},Xo={class:"timeline centered-content",id:"timeline"},$o=["onClick"],Fo={class:"timeline-panel"},Io={class:"timeline-heading"},xo={class:"timeline-body"},To={class:"timeline-user"},qo={class:"timeline",id:"timeline"},Do=["onClick"],Bo={class:"timeline-panel"},Jo={class:"timeline-heading"},No={class:"timeline-body"},Qo={class:"timeline-user"};function Wo(e,t,o,s,l,i){const d=(0,n.g2)("SidebarPage");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(d),(0,n.Lk)("div",Eo,[(0,n.Lk)("div",Po,[l.isLoggedIn?((0,n.uX)(),(0,n.CE)("div",Uo,[(0,n.Lk)("div",Vo,[(0,n.bo)((0,n.Lk)("input",{type:"text",id:"searchInput",placeholder:"æœå°‹ç´€éŒ„...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e)},null,512),[[a.Jo,l.searchQuery]]),(0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.filterTimeline&&i.filterTimeline(...e))},"æœå°‹")]),(0,n.Lk)("ul",Xo,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredItems,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"timeline-item",key:e.id,onClick:t=>i.showDetail(e.id)},[(0,n.Lk)("div",Fo,[(0,n.Lk)("div",Io,[(0,n.Lk)("h4",null,(0,r.v_)(e.date),1)]),(0,n.Lk)("div",xo,[(0,n.Lk)("p",null,(0,r.v_)(e.action),1),(0,n.Lk)("div",To,"ä½¿ç”¨è€…: "+(0,r.v_)(e.user),1)])])],8,$o)))),128))])])):((0,n.uX)(),(0,n.CE)("div",Ro,Ao))]),(0,n.Lk)("ul",qo,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredItems,(e=>((0,n.uX)(),(0,n.CE)("li",{class:"timeline-item",key:e.id,onClick:t=>i.showDetail(e.id)},[(0,n.Lk)("div",Bo,[(0,n.Lk)("div",Jo,[(0,n.Lk)("h4",null,(0,r.v_)(e.date),1)]),(0,n.Lk)("div",No,[(0,n.Lk)("p",null,(0,r.v_)(e.action),1),(0,n.Lk)("div",Qo,"ä½¿ç”¨è€…: "+(0,r.v_)(e.user),1)])])],8,Do)))),128))])])])}function jo(e){let t=null;if(document.cookie&&""!==document.cookie){const o=document.cookie.split(";");for(let a=0;a<o.length;a++){const n=o[a].trim();if(n.substring(0,e.length+1)===e+"="){t=decodeURIComponent(n.substring(e.length+1));break}}}return t}ee.A.defaults.baseURL="http://localhost:8000",ee.A.defaults.withCredentials=!0,ee.A.interceptors.request.use((e=>{const t=localStorage.getItem("token");t&&(e.headers["Authorization"]=`Bearer ${t}`);const o=jo("csrftoken");return o&&(e.headers["X-CSRFToken"]=o),e}),(e=>Promise.reject(e)));var zo=ee.A,Oo={name:"HistoryPage",components:{SidebarPage:R},data(){return{searchQuery:"",items:[],isLoggedIn:!1}},computed:{filteredItems(){return this.items.filter((e=>{const t=this.searchQuery.trim().toUpperCase();return e.action.toUpperCase().includes(t)||e.date.includes(t)}))}},methods:{filterTimeline(){},showDetail(e){this.$router.push(`/detail/${e}`)},async checkLoginStatus(){try{const e=await zo.get("/api/frontend/check_login_status");this.isLoggedIn=e.data.loggedIn,this.isLoggedIn?this.fetchHistory():this.$router.pugh("/login")}catch(e){console.error("ç„¡æ³•æª¢æŸ¥ç™»å…¥ç‹€æ…‹:",e)}},async fetchHistory(){try{const e=await zo.get("/api/frontend/history/");this.items=e.data}catch(e){console.error("ç„¡æ³•ç²å–æ­·å²è¨˜éŒ„:",e)}}},mounted(){this.checkLoginStatus()}};const Ho=(0,h.A)(Oo,[["render",Wo],["__scopeId","data-v-d60bb562"]]);var Ko=Ho;const Zo=e=>((0,n.Qi)("data-v-24b9cf2e"),e=e(),(0,n.jt)(),e),Go={class:"history-details"},Yo={class:"container"},ea={key:0,class:"details-container"},ta={class:"details-content"},oa={key:0},aa={key:1},na={key:1},sa=Zo((()=>(0,n.Lk)("p",null,"æœªæ‰¾åˆ°è©²ç´€éŒ„çš„è©³ç´°ä¿¡æ¯ã€‚",-1))),la=[sa],ra={class:"back-btn"};function ia(e,t,o,a,s,l){return(0,n.uX)(),(0,n.CE)("div",Go,[(0,n.Lk)("div",Yo,[s.detail?((0,n.uX)(),(0,n.CE)("div",ea,[(0,n.Lk)("h2",null,(0,r.v_)(s.detail.timestamp),1),(0,n.Lk)("div",ta,[(0,n.Lk)("p",null,"æ“ä½œï¼š"+(0,r.v_)(s.detail.action),1),(0,n.Lk)("p",null,"æ™‚é–“ï¼š"+(0,r.v_)(s.detail.timestamp),1),(0,n.Lk)("p",null,"ä½¿ç”¨è€…ï¼š"+(0,r.v_)(s.detail.user),1),s.detail.device?((0,n.uX)(),(0,n.CE)("p",oa,"è¨­å‚™å“ç‰Œï¼š"+(0,r.v_)(s.detail.device.brand),1)):(0,n.Q3)("",!0),s.detail.device?((0,n.uX)(),(0,n.CE)("p",aa,"è¨­å‚™é¡å‹ï¼š"+(0,r.v_)(s.detail.device.type),1)):(0,n.Q3)("",!0),(0,n.Lk)("p",null,"æ“ä½œçµæœï¼š"+(0,r.v_)(s.detail.success?"æˆåŠŸ":"å¤±æ•—"),1)])])):((0,n.uX)(),(0,n.CE)("div",na,la)),(0,n.Lk)("div",ra,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},"è¿”å›ä¸Šä¸€é ")])])])}var da={data(){return{details:[{id:1,timestamp:"2024/1/22 16:22:39",action:"ç·¨è¼¯å€‹äººè³‡è¨Š",user:"User1",device:{brand:"Dell",type:"PC"},success:!0},{id:2,timestamp:"2024/1/22 16:00:21",action:"æŸ¥çœ‹é¦–é ",user:"User2",device:{brand:"Apple",type:"å¹³æ¿"},success:!1},{id:3,timestamp:"2024/7/12 22:03",action:"ç™»å…¥",user:"User3",device:{brand:"Samsung",type:"æ‰‹æ©Ÿ"},success:!0}],detail:null}},mounted(){const e=parseInt(this.$route.params.id);this.detail=this.details.find((t=>t.id===e))||{error:"æœªæ‰¾åˆ°è©²ç´€éŒ„çš„è©³ç´°ä¿¡æ¯ã€‚"}},methods:{goBack(){this.$router.go(-1)}}};const ca=(0,h.A)(da,[["render",ia],["__scopeId","data-v-24b9cf2e"]]);var ua=ca;const pa=e=>((0,n.Qi)("data-v-8fd722f4"),e=e(),(0,n.jt)(),e),ma={class:"container"},ha=pa((()=>(0,n.Lk)("h2",null,"é‡è¨­å¯†ç¢¼",-1))),ka={class:"input-container"},ba=pa((()=>(0,n.Lk)("label",{for:"resetCode"},"é‡ç½®ä»£ç¢¼ï¼š",-1))),fa={class:"input-container"},va=pa((()=>(0,n.Lk)("label",{for:"newPassword"},"æ–°å¯†ç¢¼ï¼š",-1))),La={class:"password-container"},ga={key:0,class:"error"},Ca={class:"input-container"},ya=pa((()=>(0,n.Lk)("label",{for:"confirmPassword"},"ç¢ºèªæ–°å¯†ç¢¼ï¼š",-1))),wa={class:"password-container"},_a={key:0,class:"error"},Ma=pa((()=>(0,n.Lk)("button",{type:"submit"},"é‡è¨­å¯†ç¢¼",-1)));function Ea(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",ma,[ha,(0,n.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>i.handleResetPassword&&i.handleResetPassword(...e)),["prevent"]))},[(0,n.Lk)("div",ka,[ba,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"resetCode","onUpdate:modelValue":t[0]||(t[0]=e=>l.resetCode=e),required:""},null,512),[[a.Jo,l.resetCode]])]),(0,n.Lk)("div",fa,[va,(0,n.Lk)("div",La,[(0,n.bo)((0,n.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[1]||(t[1]=e=>l.newPassword=e),required:""},null,512),[[a.Jo,l.newPassword]]),(0,n.Lk)("span",{class:"toggle-password",onClick:t[2]||(t[2]=(...e)=>i.handleTogglePassword&&i.handleTogglePassword(...e))},"ğŸ‘ï¸")]),l.passwordError?((0,n.uX)(),(0,n.CE)("p",ga,(0,r.v_)(l.passwordError),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Ca,[ya,(0,n.Lk)("div",wa,[(0,n.bo)((0,n.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[3]||(t[3]=e=>l.confirmPassword=e),required:""},null,512),[[a.Jo,l.confirmPassword]]),(0,n.Lk)("span",{class:"toggle-password",onClick:t[4]||(t[4]=(...e)=>i.handleTogglePassword&&i.handleTogglePassword(...e))},"ğŸ‘ï¸")]),l.confirmPasswordError?((0,n.uX)(),(0,n.CE)("p",_a,(0,r.v_)(l.confirmPasswordError),1)):(0,n.Q3)("",!0)]),Ma],32)])}var Pa={name:"ResetPasswordPage",data(){return{resetCode:"",newPassword:"",confirmPassword:"",csrfToken:"",passwordError:"",confirmPasswordError:""}},methods:{setAxiosCsrfToken(e){ee.A.defaults.headers.common["X-CSRFToken"]=e},async fetchCsrfToken(){try{const e=await ee.A.get("http://127.0.0.1:8000/frontend/reset-password/",{withCredentials:!0});this.csrfToken=e.data.csrfToken,this.setAxiosCsrfToken(this.csrfToken)}catch(e){console.error("Failed to fetch CSRF Token:",e)}},validatePasswordStrength(e){const t=8,o=/[A-Z]/.test(e),a=/[a-z]/.test(e),n=/\d/.test(e),s=/[!@#$%^&*(),.?":{}|<>]/.test(e);return e.length>=t&&o&&a&&n&&s},async handleResetPassword(){if(this.passwordError="",this.confirmPasswordError="",this.validatePasswordStrength(this.newPassword))if(this.newPassword===this.confirmPassword)try{const e=await ee.A.post("http://127.0.0.1:8000/frontend/reset-password/",{resetCode:this.resetCode,newPassword:this.newPassword},{headers:{"X-CSRFToken":this.csrfToken},withCredentials:!0});e.data.success?(alert("å¯†ç¢¼é‡ç½®æˆåŠŸï¼"),this.$router.push("/frontend/login")):alert(e.data.message||"é‡ç½®å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚")}catch(e){alert("é‡ç½®å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚")}else this.confirmPasswordError="æ–°å¯†ç¢¼å’Œç¢ºèªæ–°å¯†ç¢¼ä¸åŒ¹é…";else this.passwordError="å¯†ç¢¼å¿…é ˆè‡³å°‘åŒ…å«8å€‹å­—ç¬¦ï¼Œä¸”åŒ…æ‹¬å¤§å°å¯«å­—æ¯ã€æ•¸å­—å’Œç‰¹æ®Šå­—ç¬¦"},handleTogglePassword(e){const t=e.target.previousElementSibling;t.type="password"===t.type?"text":"password"}},created(){this.fetchCsrfToken()}};const Ra=(0,h.A)(Pa,[["render",Ea],["__scopeId","data-v-8fd722f4"]]);var Sa=Ra;const Aa=e=>((0,n.Qi)("data-v-2c241186"),e=e(),(0,n.jt)(),e),Ua={class:"container"},Va=Aa((()=>(0,n.Lk)("h2",null,"ç™»å…¥",-1))),Xa=Aa((()=>(0,n.Lk)("input",{type:"hidden",name:"next",value:"/backend/management"},null,-1))),$a={class:"form-group"},Fa=Aa((()=>(0,n.Lk)("label",{for:"email"},"å¸³è™Ÿ:",-1))),Ia={class:"form-group"},xa=Aa((()=>(0,n.Lk)("label",{for:"password"},"å¯†ç¢¼:",-1))),Ta={class:"form-group"},qa=Aa((()=>(0,n.Lk)("label",{for:"remember_me"},"è¨˜ä½æˆ‘",-1))),Da=Aa((()=>(0,n.Lk)("button",{type:"submit",class:"btn-login"},"ç™»å…¥",-1))),Ba={key:0};function Ja(e,t,o,s,l,i){const d=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Ua,[Va,(0,n.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>i.login&&i.login(...e)),["prevent"]))},[Xa,(0,n.Lk)("div",$a,[Fa,(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),required:""},null,512),[[a.Jo,l.email]])]),(0,n.Lk)("div",Ia,[xa,(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),required:""},null,512),[[a.Jo,l.password]])]),(0,n.Lk)("div",Ta,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",id:"remember_me","onUpdate:modelValue":t[2]||(t[2]=e=>l.rememberMe=e)},null,512),[[a.lH,l.rememberMe]]),qa]),Da],32),(0,n.Lk)("p",null,[(0,n.eW)(" é‚„æœªæ“æœ‰å¸³è™Ÿ? "),(0,n.bF)(d,{to:"/frontend/register"},{default:(0,n.k6)((()=>[(0,n.eW)("è¨»å†Š")])),_:1})]),(0,n.Lk)("p",null,[(0,n.eW)(" å¿˜è¨˜å¯†ç¢¼? "),(0,n.bF)(d,{to:"/frontend/forgot_password"},{default:(0,n.k6)((()=>[(0,n.eW)("é‡ç½®å¯†ç¢¼")])),_:1})]),l.error?((0,n.uX)(),(0,n.CE)("p",Ba,(0,r.v_)(l.error),1)):(0,n.Q3)("",!0)])}var Na={name:"AppLogin",data(){return{email:"",password:"",rememberMe:!1,error:""}},methods:{async login(){try{const e=Qa("csrftoken"),t=await zo.post("/api/token/",{email:this.email,password:this.password,remember_me:this.rememberMe},{headers:{"X-CSRFToken":e}});console.log("ç™»å…¥æˆåŠŸ",t),localStorage.setItem("token",t.data.access),this.$router.push("/backend/management")}catch(e){console.error("ç™»å…¥å¤±è´¥",e.response),e.response&&e.response.data?this.error=e.response.data.detail||"ç™»å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥æ‚¨çš„ä½¿ç”¨è€…åç¨±å’Œå¯†ç¢¼":this.error="ç™»å…¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦"}}}};function Qa(e){let t=null;if(document.cookie&&""!==document.cookie){const o=document.cookie.split(";");for(let a=0;a<o.length;a++){const n=o[a].trim();if(n.substring(0,e.length+1)===e+"="){t=decodeURIComponent(n.substring(e.length+1));break}}}return t}const Wa=(0,h.A)(Na,[["render",Ja],["__scopeId","data-v-2c241186"]]);var ja=Wa;const za=e=>((0,n.Qi)("data-v-1058d71e"),e=e(),(0,n.jt)(),e),Oa={class:"container"},Ha=za((()=>(0,n.Lk)("h2",null,"è¨»å†Š",-1))),Ka={key:0,class:"error"},Za=za((()=>(0,n.Lk)("label",{for:"username"},"ç”¨æˆ¶å:",-1))),Ga=za((()=>(0,n.Lk)("label",{for:"email"},"é›»å­éƒµä»¶:",-1))),Ya={id:"verification-feedback",class:"feedback"},en=za((()=>(0,n.Lk)("label",{for:"verification_code"},"é©—è­‰ç¢¼:",-1))),tn={id:"verification-feedback",class:"feedback"},on=za((()=>(0,n.Lk)("label",{for:"password"},"å¯†ç¢¼:",-1))),an=za((()=>(0,n.Lk)("label",{for:"confirm_password"},"ç¢ºèªå¯†ç¢¼:",-1))),nn=za((()=>(0,n.Lk)("label",{for:"phone"},"æ‰‹æ©Ÿè™Ÿç¢¼:",-1))),sn=za((()=>(0,n.Lk)("input",{type:"submit",value:"è¨»å†Š"},null,-1))),ln=za((()=>(0,n.Lk)("p",{class:"terms"},[(0,n.eW)(" é»æ“Šã€Œè¨»å†Šã€è¡¨ç¤ºæ‚¨åŒæ„æˆ‘å€‘çš„ "),(0,n.Lk)("a",{href:"#"},"æœå‹™æ¢æ¬¾"),(0,n.eW)(" å’Œ "),(0,n.Lk)("a",{href:"#"},"éš±ç§æ”¿ç­–")],-1)));function rn(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",Oa,[Ha,(0,n.Lk)("form",{onSubmit:t[8]||(t[8]=(0,a.D$)(((...e)=>i.register&&i.register(...e)),["prevent"]))},[l.error?((0,n.uX)(),(0,n.CE)("div",Ka,[(0,n.Lk)("p",null,(0,r.v_)(l.error),1)])):(0,n.Q3)("",!0),Za,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>l.form.username=e),required:""},null,512),[[a.Jo,l.form.username]]),Ga,(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>l.form.email=e),required:""},null,512),[[a.Jo,l.form.email]]),(0,n.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>i.getVerificationCode&&i.getVerificationCode(...e))},"ç²å–é©—è­‰ç¢¼"),(0,n.Lk)("div",Ya,(0,r.v_)(l.feedback),1),en,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"verification_code","onUpdate:modelValue":t[3]||(t[3]=e=>l.form.verification_code=e),required:""},null,512),[[a.Jo,l.form.verification_code]]),(0,n.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>i.validateVerificationCode&&i.validateVerificationCode(...e))},"é©—è­‰ç¢¼é©—è­‰"),(0,n.Lk)("div",tn,(0,r.v_)(l.feedback),1),on,(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[5]||(t[5]=e=>l.form.password=e),required:""},null,512),[[a.Jo,l.form.password]]),an,(0,n.bo)((0,n.Lk)("input",{type:"password",id:"confirm_password","onUpdate:modelValue":t[6]||(t[6]=e=>l.form.confirm_password=e),required:""},null,512),[[a.Jo,l.form.confirm_password]]),nn,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"phone","onUpdate:modelValue":t[7]||(t[7]=e=>l.form.phone=e),required:""},null,512),[[a.Jo,l.form.phone]]),sn,ln],32)])}var dn={name:"AppRegister",data(){return{form:{username:"",email:"",verification_code:"",password:"",confirm_password:"",phone:""},error:"",feedback:""}},methods:{getVerificationCode(){const e=this.form.email.trim();this.validateEmail(e)?zo.get(`/backend/send_verification_code/?email=${encodeURIComponent(e)}`).then((e=>{e.data.success?(alert("é©—è­‰ç¢¼å·²ç™¼é€åˆ°æ‚¨çš„é›»å­éƒµä»¶ã€‚"),this.feedback="é©—è­‰ç¢¼å·²ç™¼é€åˆ°æ‚¨çš„é›»å­éƒµä»¶ï¼Œæœ‰æ•ˆæœŸé™5åˆ†é˜ã€‚"):(alert("ç™¼é€é©—è­‰ç¢¼å¤±æ•—ã€‚"),this.feedback="ç™¼é€é©—è­‰ç¢¼å¤±æ•—ï¼Œè«‹é‡è©¦ã€‚")})).catch((()=>{alert("ç™¼é€é©—è­‰ç¢¼å¤±æ•—ã€‚"),this.feedback="ç™¼é€é©—è­‰ç¢¼å¤±æ•—ï¼Œè«‹é‡è©¦ã€‚"})):alert("è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµä»¶åœ°å€ã€‚")},validateVerificationCode(){const e=this.form.email.trim(),t=this.form.verification_code.trim();""!==t?zo.get(`/backend/verify_code/?email=${encodeURIComponent(e)}&code=${encodeURIComponent(t)}`).then((e=>{e.data.success?(alert("é©—è­‰ç¢¼æœ‰æ•ˆã€‚"),this.feedback="é©—è­‰ç¢¼æœ‰æ•ˆã€‚"):(alert("é©—è­‰ç¢¼ç„¡æ•ˆæˆ–å·²éæœŸã€‚"),this.feedback="é©—è­‰ç¢¼ç„¡æ•ˆæˆ–å·²éæœŸï¼Œè«‹é‡è©¦ã€‚")})).catch((()=>{alert("é©—è­‰ç¢¼é©—è­‰å¤±æ•—ã€‚"),this.feedback="é©—è­‰ç¢¼é©—è­‰å¤±æ•—ï¼Œè«‹é‡è©¦ã€‚"})):alert("è«‹è¼¸å…¥é©—è­‰ç¢¼ã€‚")},validateEmail(e){const t=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;return t.test(String(e).toLowerCase())},register(){console.log("Registering user:",this.form)}}};const cn=(0,h.A)(dn,[["render",rn],["__scopeId","data-v-1058d71e"]]);var un=cn;const pn=e=>((0,n.Qi)("data-v-2d1476f6"),e=e(),(0,n.jt)(),e),mn={class:"container"},hn=pn((()=>(0,n.Lk)("h2",null,"å¿˜è¨˜å¯†ç¢¼",-1))),kn=pn((()=>(0,n.Lk)("label",{for:"email"},"é›»å­éƒµä»¶ï¼š",-1))),bn=pn((()=>(0,n.Lk)("button",{type:"submit"},"ç™¼é€",-1)));function fn(e,t,o,s,l,r){return(0,n.uX)(),(0,n.CE)("div",mn,[hn,(0,n.Lk)("form",{onSubmit:t[1]||(t[1]=(0,a.D$)(((...e)=>r.sendPasswordReset&&r.sendPasswordReset(...e)),["prevent"]))},[kn,(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),required:""},null,512),[[a.Jo,l.email]]),bn],32)])}var vn={name:"ForgetPasswordPage",data(){return{email:""}},methods:{sendPasswordReset(){this.email?alert("å·²ç™¼é€å¯†ç¢¼é‡è¨­è«‹æ±‚è‡³æ‚¨çš„é›»å­éƒµä»¶"):alert("è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµä»¶åœ°å€")}}};const Ln=(0,h.A)(vn,[["render",fn],["__scopeId","data-v-2d1476f6"]]);var gn=Ln;const Cn=e=>((0,n.Qi)("data-v-226d2503"),e=e(),(0,n.jt)(),e),yn={key:0},wn=Cn((()=>(0,n.Lk)("h1",{id:"welcome-title"},"æ­¡è¿ä¾†åˆ°ç®¡ç†ä»‹é¢",-1))),_n=Cn((()=>(0,n.Lk)("p",{id:"welcome-description"},"è«‹é¸æ“‡ä¸€å€‹é¸é …ä¾†ç®¡ç†ã€‚",-1))),Mn=[wn,_n];function En(e,t,o,a,s,l){const i=(0,n.g2)("Sidebar"),d=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(i,{isSidebarActive:a.isSidebarActive,onToggleSidebar:a.toggleSidebar},null,8,["isSidebarActive","onToggleSidebar"]),(0,n.Lk)("div",{class:(0,r.C4)(["main-content",{shifted:a.isSidebarActive}])},[(0,n.bF)(d,null,{default:(0,n.k6)((({Component:e})=>[e?((0,n.uX)(),(0,n.Wv)((0,n.$y)(e),{key:0})):(0,n.Q3)("",!0)])),_:1}),a.hasRouteComponent?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",yn,Mn))],2)])}var Pn=o(144),Rn={name:"AppManagement",components:{Sidebar:I},setup(){const e=(0,Pn.KR)(!1),t=(0,D.lq)(),o=(0,Pn.KR)(!1);(0,n.wB)(t,(e=>{o.value=e.matched.length>1}),{immediate:!0});const a=()=>{e.value=!e.value};return{isSidebarActive:e,toggleSidebar:a,hasRouteComponent:o}}};const Sn=(0,h.A)(Rn,[["render",En],["__scopeId","data-v-226d2503"]]);var An=Sn;const Un=e=>((0,n.Qi)("data-v-2ecd8a76"),e=e(),(0,n.jt)(),e),Vn={class:"dashboard-container"},Xn={class:"header"},$n=Un((()=>(0,n.Lk)("h2",null,"å„€è¡¨æ¿ç®¡ç†",-1))),Fn={class:"chart-actions"},In={class:"selection-container"},xn={class:"module-selection"},Tn=Un((()=>(0,n.Lk)("label",{for:"module-select"},"é¸æ“‡æ¨¡çµ„:",-1))),qn=["value"],Dn={class:"role-selection"},Bn=Un((()=>(0,n.Lk)("label",{for:"role-select"},"é¸æ“‡è§’è‰²:",-1))),Jn=["value"],Nn={class:"chart-selection"},Qn={class:"chart-container"},Wn=Un((()=>(0,n.Lk)("h3",null,"æ–°å¢åœ–è¡¨",-1))),jn=Un((()=>(0,n.Lk)("label",{for:"chartName"},"åœ–è¡¨åç¨±:",-1))),zn=Un((()=>(0,n.Lk)("button",{type:"submit"},"æäº¤",-1))),On=Un((()=>(0,n.Lk)("h3",null,"ç·¨è¼¯åœ–è¡¨",-1))),Hn=Un((()=>(0,n.Lk)("label",{for:"chartName"},"åœ–è¡¨åç¨±:",-1))),Kn=Un((()=>(0,n.Lk)("button",{type:"submit"},"æäº¤",-1)));function Zn(e,t,o,s,l,i){const d=(0,n.g2)("draggable"),c=(0,n.g2)("Modal");return(0,n.uX)(),(0,n.CE)("div",Vn,[(0,n.Lk)("div",Xn,[$n,(0,n.Lk)("div",Fn,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.openAddChartModal&&i.openAddChartModal(...e))},"æ–°å¢åœ–è¡¨"),(0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.openEditChartModal&&i.openEditChartModal(...e))},"ç·¨è¼¯åœ–è¡¨")])]),(0,n.Lk)("div",In,[(0,n.Lk)("div",xn,[Tn,(0,n.bo)((0,n.Lk)("select",{id:"module-select","onUpdate:modelValue":t[2]||(t[2]=e=>l.selectedModule=e),onChange:t[3]||(t[3]=(...e)=>i.onModuleChange&&i.onModuleChange(...e))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.modules,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,qn)))),128))],544),[[a.u1,l.selectedModule]])]),(0,n.Lk)("div",Dn,[Bn,(0,n.bo)((0,n.Lk)("select",{id:"role-select","onUpdate:modelValue":t[4]||(t[4]=e=>l.selectedRole=e),onChange:t[5]||(t[5]=(...e)=>i.onRoleChange&&i.onRoleChange(...e))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.roles,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,Jn)))),128))],544),[[a.u1,l.selectedRole]])])]),(0,n.Lk)("div",Nn,[(0,n.Lk)("button",{onClick:t[6]||(t[6]=e=>i.setCurrentChart("SalesChart"))},"éŠ·å”®é¡"),(0,n.Lk)("button",{onClick:t[7]||(t[7]=e=>i.setCurrentChart("RevenueChart"))},"ç‡Ÿæ¥­é¡"),(0,n.Lk)("button",{onClick:t[8]||(t[8]=e=>i.setCurrentChart("InventoryChart"))},"åº«å­˜é‡")]),(0,n.Lk)("div",Qn,[(0,n.bF)(d,{modelValue:l.charts,"onUpdate:modelValue":t[9]||(t[9]=e=>l.charts=e),class:"drag-area",options:{group:"charts",animation:200}},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.charts,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"chart-item"},[((0,n.uX)(),(0,n.Wv)((0,n.$y)(e.component),{"role-id":l.selectedRole},null,8,["role-id"]))])))),128))])),_:1},8,["modelValue"])]),l.showAddChartModal?((0,n.uX)(),(0,n.Wv)(c,{key:0,onClose:i.closeAddChartModal},{header:(0,n.k6)((()=>[Wn])),body:(0,n.k6)((()=>[(0,n.Lk)("form",{onSubmit:t[11]||(t[11]=(0,a.D$)(((...e)=>i.submitAddChartForm&&i.submitAddChartForm(...e)),["prevent"]))},[(0,n.Lk)("div",null,[jn,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"chartName","onUpdate:modelValue":t[10]||(t[10]=e=>l.newChart.name=e),required:""},null,512),[[a.Jo,l.newChart.name]])]),zn],32)])),_:1},8,["onClose"])):(0,n.Q3)("",!0),l.showEditChartModal?((0,n.uX)(),(0,n.Wv)(c,{key:1,onClose:i.closeEditChartModal},{header:(0,n.k6)((()=>[On])),body:(0,n.k6)((()=>[(0,n.Lk)("form",{onSubmit:t[13]||(t[13]=(0,a.D$)(((...e)=>i.submitEditChartForm&&i.submitEditChartForm(...e)),["prevent"]))},[(0,n.Lk)("div",null,[Hn,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"chartName","onUpdate:modelValue":t[12]||(t[12]=e=>l.editChart.name=e),required:""},null,512),[[a.Jo,l.editChart.name]])]),Kn],32)])),_:1},8,["onClose"])):(0,n.Q3)("",!0)])}var Gn=o(1527),Yn=o.n(Gn);const es={class:"modal-content"},ts={class:"modal-header"},os={class:"modal-body"},as={class:"modal-footer"};function ns(e,t,o,s,l,r){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:t[1]||(t[1]=(0,a.D$)(((...e)=>r.close&&r.close(...e)),["self"]))},[(0,n.Lk)("div",es,[(0,n.Lk)("div",ts,[(0,n.RG)(e.$slots,"header",{},void 0,!0),(0,n.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e))},"Ã—")]),(0,n.Lk)("div",os,[(0,n.RG)(e.$slots,"body",{},void 0,!0)]),(0,n.Lk)("div",as,[(0,n.RG)(e.$slots,"footer",{},void 0,!0)])])])}var ss={name:"ChartModal",methods:{close(){this.$emit("close")}}};const ls=(0,h.A)(ss,[["render",ns],["__scopeId","data-v-6a563ac8"]]);var rs=ls,is={name:"DashboardManager",components:{draggable:Yn(),SalesChart:Qe,RevenueChart:He,InventoryChart:et,Modal:rs},data(){return{currentChart:"SalesChart",modules:[],roles:[],selectedModule:null,selectedRole:null,showAddChartModal:!1,showEditChartModal:!1,charts:[{id:1,component:"SalesChart"},{id:2,component:"RevenueChart"},{id:3,component:"InventoryChart"}],newChart:{name:""},editChart:{name:""}}},methods:{async fetchModules(){try{const e=await zo.get("/api/backend/modules/");this.modules=e.data,this.selectedModule=this.modules.length>0?this.modules[0].id:null}catch(e){console.error("Error fetching modules:",e)}},async fetchRoles(){try{const e=await zo.get(`/api/backend/get_roles_by_module/${this.selectedModule}/`);this.roles=e.data,this.selectedRole=this.roles.length>0?this.roles[0].id:null}catch(e){console.error("Error fetching roles:",e)}},setCurrentChart(e){this.currentChart=e},onModuleChange(){this.fetchRoles(),console.log("é¸æ“‡çš„æ¨¡çµ„:",this.selectedModule)},onRoleChange(){console.log("é¸æ“‡çš„è§’è‰²:",this.selectedRole)},openAddChartModal(){this.showAddChartModal=!0},closeAddChartModal(){this.showAddChartModal=!1},submitAddChartForm(){console.log("æäº¤æ–°å¢å›¾è¡¨è¡¨å•:",this.newChart),this.closeAddChartModal()},openEditChartModal(){this.showEditChartModal=!0},closeEditChartModal(){this.showEditChartModal=!1},submitEditChartForm(){console.log("æäº¤ç¼–è¾‘å›¾è¡¨è¡¨å•:",this.editChart),this.closeEditChartModal()}},async mounted(){await this.fetchModules(),await this.fetchRoles()}};const ds=(0,h.A)(is,[["render",Zn],["__scopeId","data-v-2ecd8a76"]]);var cs=ds;const us=e=>((0,n.Qi)("data-v-9a3ce670"),e=e(),(0,n.jt)(),e),ps={class:"container"},ms={class:"header"},hs=us((()=>(0,n.Lk)("h2",null,"ç”¨æˆ¶ç®¡ç†",-1))),ks={class:"filter-section"},bs=us((()=>(0,n.Lk)("label",{for:"sort-select"},"æ’åº:",-1))),fs=(0,n.Fv)('<option value="name" data-v-9a3ce670>å§“å</option><option value="email" data-v-9a3ce670>é›»å­éƒµä»¶</option><option value="department" data-v-9a3ce670>éƒ¨é–€</option><option value="position" data-v-9a3ce670>è·ä½</option><option value="creation-time" data-v-9a3ce670>å»ºç«‹æ™‚é–“</option><option value="last-login" data-v-9a3ce670>æœ€è¿‘ç™»å…¥æ™‚é–“</option>',6),vs=[fs],Ls=us((()=>(0,n.Lk)("label",{for:"department-select"},"éƒ¨é–€:",-1))),gs=us((()=>(0,n.Lk)("option",{value:"all"},"å…¨éƒ¨",-1))),Cs=["value"],ys={class:"user-table"},ws=us((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"å§“å"),(0,n.Lk)("th",null,"é›»å­éƒµä»¶"),(0,n.Lk)("th",null,"é›»è©±è™Ÿç¢¼"),(0,n.Lk)("th",null,"éƒ¨é–€"),(0,n.Lk)("th",null,"è·ä½"),(0,n.Lk)("th",null,"å»ºç«‹æ™‚é–“"),(0,n.Lk)("th",null,"æœ€è¿‘ç™»å…¥æ™‚é–“"),(0,n.Lk)("th",null,"æ“ä½œ")])],-1))),_s=["onClick"],Ms=["onClick"],Es=["onClick"];function Ps(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",ps,[(0,n.Lk)("div",ms,[hs,(0,n.Lk)("button",{id:"pending-approval-btn",class:"pending-approval-btn",onClick:t[0]||(t[0]=(...e)=>i.navigateToPendingList&&i.navigateToPendingList(...e))},"å¾…å¯©æ ¸")]),(0,n.Lk)("div",ks,[bs,(0,n.bo)((0,n.Lk)("select",{id:"sort-select","onUpdate:modelValue":t[1]||(t[1]=e=>l.sortBy=e),onChange:t[2]||(t[2]=(...e)=>i.applyFilters&&i.applyFilters(...e))},vs,544),[[a.u1,l.sortBy]]),Ls,(0,n.bo)((0,n.Lk)("select",{id:"department-select","onUpdate:modelValue":t[3]||(t[3]=e=>l.departmentFilter=e),onChange:t[4]||(t[4]=(...e)=>i.applyFilters&&i.applyFilters(...e))},[gs,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.departments,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,r.v_)(e),9,Cs)))),128))],544),[[a.u1,l.departmentFilter]]),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"search-box",placeholder:"æœå°‹...","onUpdate:modelValue":t[5]||(t[5]=e=>l.query=e),onKeydown:t[6]||(t[6]=(0,a.jR)(((...e)=>i.applyFilters&&i.applyFilters(...e)),["enter"]))},null,544),[[a.Jo,l.query]]),(0,n.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>i.applyFilters&&i.applyFilters(...e)),class:"search-btn"},"æœå°‹")]),(0,n.Lk)("table",ys,[ws,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredUsers,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("td",null,(0,r.v_)(e.username),1),(0,n.Lk)("td",null,(0,r.v_)(e.email),1),(0,n.Lk)("td",null,(0,r.v_)(e.phone),1),(0,n.Lk)("td",null,(0,r.v_)(e.department_id),1),(0,n.Lk)("td",null,(0,r.v_)(e.position_id),1),(0,n.Lk)("td",null,(0,r.v_)(e.date_joined),1),(0,n.Lk)("td",null,(0,r.v_)(e.last_login),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"edit-btn",onClick:t=>i.navigateToEditUser(e.id)},"ç·¨è¼¯",8,_s),(0,n.Lk)("button",{class:"delete-btn",onClick:t=>i.deleteUser(e.id)},"åˆªé™¤",8,Ms),(0,n.Lk)("button",{class:"assigning-roles-btn",onClick:t=>i.navigateToAssignRole(e.id)},"åˆ†é…è§’è‰²",8,Es)])])))),128))])])])}var Rs={name:"UserManagement",data(){return{sortBy:"name",departmentFilter:"all",query:"",users:[],departments:["éŠ·å”®éƒ¨","äººåŠ›è³‡æºéƒ¨","è³‡è¨Šéƒ¨","æ¥­å‹™éƒ¨","è²¡å‹™éƒ¨"]}},computed:{filteredUsers(){let e=this.users;if("all"!==this.departmentFilter&&(e=e.filter((e=>e.department_id===this.departmentFilter))),this.query){const t=this.query.toLowerCase();e=e.filter((e=>e.username.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phone.toLowerCase().includes(t)))}return e.sort(((e,t)=>"name"===this.sortBy?e.username.localeCompare(t.username):"email"===this.sortBy?e.email.localeCompare(t.email):"department"===this.sortBy?e.department_id.localeCompare(t.department_id):"position"===this.sortBy?e.position_id.localeCompare(t.position_id):"creation-time"===this.sortBy?new Date(e.date_joined)-new Date(t.date_joined):"last-login"===this.sortBy?new Date(e.last_login)-new Date(t.last_login):0))}},methods:{applyFilters(){console.log("Filters applied")},navigateToPendingList(){this.$router.push("/backend/pending_list")},navigateToEditUser(e){this.$router.push(`/backend/edit_user/${e}`)},navigateToAssignRole(e){this.$router.push(`/backend/assign_role/${e}`)},fetchUsers(){zo.get("/api/backend/users/").then((e=>{this.users=e.data})).catch((e=>{console.error("Error fetching users:",e)}))},deleteUser(e){confirm("ç¢ºå®šè¦åˆªé™¤æ­¤ç”¨æˆ¶å—ï¼Ÿ")&&zo.delete(`/api/backend/delete_user/${e}/`).then((()=>{this.fetchUsers()})).catch((e=>{console.error("Error deleting user:",e)}))}},mounted(){this.fetchUsers()}};const Ss=(0,h.A)(Rs,[["render",Ps],["__scopeId","data-v-9a3ce670"]]);var As=Ss;const Us=e=>((0,n.Qi)("data-v-36c9f245"),e=e(),(0,n.jt)(),e),Vs={class:"header"},Xs=Us((()=>(0,n.Lk)("h2",null,"è§’è‰²ç®¡ç†",-1))),$s=Us((()=>(0,n.Lk)("option",{value:"all"},"æ‰€æœ‰æ¨¡çµ„",-1))),Fs=["value"],Is={class:"role-table"},xs=Us((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"è§’è‰²åç¨±"),(0,n.Lk)("th",null,"è§’è‰²ç‹€æ…‹"),(0,n.Lk)("th",null,"ç”¨æˆ¶æ•¸"),(0,n.Lk)("th",null,"è§’è‰²æˆå“¡"),(0,n.Lk)("th",null,"æ¨¡çµ„"),(0,n.Lk)("th",null,"æ“ä½œ")])],-1))),Ts={id:"role-tbody"},qs=["data-module"],Ds={class:"switch"},Bs=["checked","onChange"],Js=Us((()=>(0,n.Lk)("span",{class:"slider"},null,-1))),Ns=["onUpdate:modelValue"],Qs=["value"],Ws=["onClick"],js=["onClick"];function zs(e,t,o,s,l,i){const d=(0,n.g2)("RoleForm"),c=(0,n.g2)("RoleModal");return(0,n.uX)(),(0,n.CE)("div",{class:(0,r.C4)(["container",{shifted:l.isSidebarActive}])},[(0,n.Lk)("div",Vs,[Xs,(0,n.Lk)("button",{id:"add-role-btn",class:"btn add-role-btn",onClick:t[0]||(t[0]=(...e)=>i.openCreateRoleModal&&i.openCreateRoleModal(...e))},"æ–°å¢è§’è‰²"),(0,n.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=(...e)=>i.navigateToRoleManagement&&i.navigateToRoleManagement(...e))},"è§’è‰²"),(0,n.Lk)("button",{class:"btn",onClick:t[2]||(t[2]=(...e)=>i.navigateToModuleManagement&&i.navigateToModuleManagement(...e))},"æ¨¡çµ„")]),(0,n.bF)(c,{isVisible:l.showCreateRoleModal,onClose:i.closeCreateRoleModal},{default:(0,n.k6)((()=>[(0,n.bF)(d,{onRoleSaved:i.fetchRoles,onClose:i.closeCreateRoleModal},null,8,["onRoleSaved","onClose"])])),_:1},8,["isVisible","onClose"]),(0,n.bo)((0,n.Lk)("select",{id:"chart-module-select","onUpdate:modelValue":t[3]||(t[3]=e=>l.selectedModule=e),onChange:t[4]||(t[4]=(...e)=>i.filterRolesByModule&&i.filterRolesByModule(...e))},[$s,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.modules,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,Fs)))),128))],544),[[a.u1,l.selectedModule]]),(0,n.Lk)("table",Is,[xs,(0,n.Lk)("tbody",Ts,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredRoles,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id,"data-module":e.module.id},[(0,n.Lk)("td",null,(0,r.v_)(e.name),1),(0,n.Lk)("td",null,[(0,n.Lk)("label",Ds,[(0,n.Lk)("input",{type:"checkbox",checked:e.is_active,onChange:t=>i.toggleStatus(e.id,!e.is_active)},null,40,Bs),Js])]),(0,n.Lk)("td",null,(0,r.v_)(e.users.length),1),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t=>e.selectedUser=t},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.users,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.username),9,Qs)))),128))],8,Ns),[[a.u1,e.selectedUser]])]),(0,n.Lk)("td",null,(0,r.v_)(e.module_name?e.module_name:"æœªçŸ¥æ¨¡çµ„"),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"permissions-btn",onClick:t=>i.openEditRoleModal(e.id)}," ç·¨è¼¯è§’è‰² ",8,Ws),(0,n.Lk)("button",{class:"delete-btn",onClick:t=>i.deleteRole(e.id)}," åˆªé™¤ ",8,js)])],8,qs)))),128))])]),(0,n.bF)(c,{isVisible:l.showEditRoleModal,onClose:i.closeEditRoleModal},{default:(0,n.k6)((()=>[(0,n.bF)(d,{roleId:l.editingRoleId,onRoleSaved:i.fetchRoles,onClose:i.closeEditRoleModal},null,8,["roleId","onRoleSaved","onClose"])])),_:1},8,["isVisible","onClose"])],2)}const Os={key:0,class:"modal-overlay"},Hs={class:"modal"};function Ks(e,t,o,a,s,l){return o.isVisible?((0,n.uX)(),(0,n.CE)("div",Os,[(0,n.Lk)("div",Hs,[(0,n.Lk)("button",{class:"close-btn",onClick:t[0]||(t[0]=t=>e.$emit("close"))},"X"),(0,n.RG)(e.$slots,"default",{},void 0,!0)])])):(0,n.Q3)("",!0)}var Zs={name:"RoleModal",props:{isVisible:{type:Boolean,required:!0}},watch:{$route(e,t){"add-permission"===t.name&&"role-edit"===e.name&&this.$emit("close")}}};const Gs=(0,h.A)(Zs,[["render",Ks],["__scopeId","data-v-a791de06"]]);var Ys=Gs;const el=e=>((0,n.Qi)("data-v-2d6614fc"),e=e(),(0,n.jt)(),e),tl={class:"container"},ol={class:"form-group"},al=el((()=>(0,n.Lk)("label",{for:"role-name"},"è§’è‰²åç¨±",-1))),nl={class:"form-group"},sl=el((()=>(0,n.Lk)("label",{for:"role-users"},"è§’è‰²æˆå“¡",-1))),ll={class:"member-container"},rl=["onUpdate:modelValue"],il=el((()=>(0,n.Lk)("option",{value:""},"-- é¸æ“‡æˆå“¡ --",-1))),dl=["value"],cl=["onClick"],ul={class:"form-group"},pl=el((()=>(0,n.Lk)("label",{for:"role-is-active"},"è§’è‰²ç‹€æ…‹",-1))),ml={class:"form-group"},hl=el((()=>(0,n.Lk)("label",{for:"role-module"},"æ¨¡çµ„",-1))),kl=el((()=>(0,n.Lk)("option",{value:""},"-- é¸æ“‡æ¨¡çµ„ --",-1))),bl=["value"],fl={class:"form-group"},vl=el((()=>(0,n.Lk)("label",null,"è§’è‰²æ¬Šé™",-1))),Ll=el((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"åŠŸèƒ½"),(0,n.Lk)("th",null,"æ–°å¢"),(0,n.Lk)("th",null,"æŸ¥è©¢"),(0,n.Lk)("th",null,"æª¢è¦–"),(0,n.Lk)("th",null,"ä¿®æ”¹"),(0,n.Lk)("th",null,"åˆªé™¤"),(0,n.Lk)("th",null,"åˆ—å°"),(0,n.Lk)("th",null,"åŒ¯å‡º"),(0,n.Lk)("th",null,"ç¶­è­·"),(0,n.Lk)("th",null,"æ“ä½œ")])],-1))),gl=["onUpdate:modelValue"],Cl=["onUpdate:modelValue"],yl=["onUpdate:modelValue"],wl=["onUpdate:modelValue"],_l=["onUpdate:modelValue"],Ml=["onUpdate:modelValue"],El=["onUpdate:modelValue"],Pl=["onUpdate:modelValue"],Rl=["onClick"],Sl={type:"submit",class:"btn"};function Al(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",tl,[(0,n.Lk)("h2",null,(0,r.v_)(l.isEdit?"ç·¨è¼¯è§’è‰²":"æ–°å¢è§’è‰²"),1),(0,n.Lk)("form",{onSubmit:t[7]||(t[7]=(0,a.D$)(((...e)=>i.saveRole&&i.saveRole(...e)),["prevent"]))},[(0,n.Lk)("div",ol,[al,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.localRole.name=e),id:"role-name",required:""},null,512),[[a.Jo,l.localRole.name]])]),(0,n.Lk)("div",nl,[sl,(0,n.Lk)("div",ll,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.localRole.users,((e,o)=>((0,n.uX)(),(0,n.CE)("div",{key:o,class:"member-item"},[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e=>l.localRole.users[o]=e,onChange:t[1]||(t[1]=(...e)=>i.updateMembers&&i.updateMembers(...e))},[il,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.availableUsers,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.username),9,dl)))),128))],40,rl),[[a.u1,l.localRole.users[o]]]),(0,n.Lk)("button",{type:"button",onClick:e=>i.removeMember(o)},"-",8,cl)])))),128)),(0,n.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>i.addMember&&i.addMember(...e))},"+")])]),(0,n.Lk)("div",ul,[pl,(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>l.localRole.is_active=e),id:"role-is-active"},null,512),[[a.lH,l.localRole.is_active]])]),(0,n.Lk)("div",ml,[hl,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.localRole.module=e),id:"role-module"},[kl,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.availableModules,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,bl)))),128))],512),[[a.u1,l.localRole.module]])]),(0,n.Lk)("div",fl,[vl,(0,n.Lk)("table",null,[Ll,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.rolePermissions,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("td",null,(0,r.v_)(e.permission_name),1),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.can_add=t},null,8,gl),[[a.lH,e.can_add]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.can_query=t},null,8,Cl),[[a.lH,e.can_query]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.can_view=t},null,8,yl),[[a.lH,e.can_view]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.can_edit=t},null,8,wl),[[a.lH,e.can_edit]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.can_delete=t},null,8,_l),[[a.lH,e.can_delete]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.can_print=t},null,8,Ml),[[a.lH,e.can_print]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.can_export=t},null,8,El),[[a.lH,e.can_export]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.can_maintain=t},null,8,Pl),[[a.lH,e.can_maintain]])]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",onClick:t=>i.deletePermission(e.id)},"åˆªé™¤",8,Rl)])])))),128))])]),(0,n.Lk)("button",{type:"button",onClick:t[5]||(t[5]=(...e)=>i.navigateToAddPermission&&i.navigateToAddPermission(...e))},"æ–°å¢æ¬Šé™")]),(0,n.Lk)("button",Sl,(0,r.v_)(l.isEdit?"ä¿å­˜è®Šæ›´":"æ–°å¢"),1),(0,n.Lk)("button",{type:"button",class:"btn secondary",onClick:t[6]||(t[6]=(...e)=>i.cancel&&i.cancel(...e))},"å–æ¶ˆ")],32)])}var Ul={name:"RoleForm",props:{roleId:{type:Number,default:null}},data(){return{localRole:{name:"",module:"",users:[],is_active:!1},availableUsers:[],availableModules:[],rolePermission:[],isEdit:!1}},methods:{async saveRole(){try{const e={...this.localRole,users:this.localRole.users,permissions:this.rolePermissions};console.log("Sending role data:",e);const t=this.isEdit?await zo.put(`/api/backend/roles/${this.localRole.id}/`,e):await zo.post("/api/backend/roles/",e);200===t.status||201===t.status?(alert("ä¿å­˜æˆåŠŸ"),await this.fetchRolePermissions(this.localRole.id),this.$emit("role-saved"),this.$emit("close")):alert("ä¿å­˜å¤±æ•—")}catch(e){console.error("Error saving role:",e.response?e.response.data:e.message),alert("ä¿å­˜å¤±æ•—")}},async fetchUsers(){try{const e=await zo.get("/api/backend/users/");this.availableUsers=e.data}catch(e){console.error("Error fetching users:",e)}},async fetchModules(){try{const e=await zo.get("/api/backend/modules/");this.availableModules=e.data,console.log("Avaliable Modules:",this.availableModules)}catch(e){console.error("Error fetching modules:",e)}},addMember(){this.localRole.users.push("")},removeMember(e){this.localRole.users.splice(e,1)},updateMembers(){this.$forceUpdate()},cancel(){this.$emit("close")},async fetchRolePermissions(e){try{const t=await zo.get(`/api/backend/role_permissions/?role_id=${e}`);this.rolePermissions=t.data}catch(t){console.error("Error fetching role permissions:",t)}},navigateToAddPermission(){this.$router.push(`/backend/role_permissions/${this.localRole.id}/`)},async deletePermission(e){try{const t=await zo.delete(`/api/backend/role_permissions/${e}/`);204===t.status?(this.rolePermissions=this.rolePermissions.filter((t=>t.id!==e)),this.$forceUpdate(),alert("åˆªé™¤æˆåŠŸ")):alert("åˆªé™¤å¤±æ•—")}catch(t){console.error("åˆªé™¤æ¬Šé™æ™‚å‡ºéŒ¯:",t.response?t.response.data:t.message),alert("åˆªé™¤å¤±æ•—")}},async loadRole(e){try{const t=await zo.get(`/api/backend/roles/${e}/`),o=t.data;console.log("APIè¿”å›çš„Role:",o),this.localRole={id:o.id,name:o.name,module:o.module?o.module:"",users:o.users.map((e=>e.id)),is_active:o.is_active},console.log("å½“å‰è§’è‰²æ¨¡å— ID:",this.localRole.module),await this.fetchRolePermissions(e),this.updateMembers(),this.$nextTick((()=>{console.log("DOM æ›´æ–°å®Œæˆï¼Œæ¨¡å—å·²åŠ è½½:",this.localRole.module)}))}catch(t){console.error("åŠ è½½è§’è‰²ä¿¡æ¯æ—¶å‡ºé”™:",t.response?t.response.data:t.message)}}},async mounted(){await this.fetchModules(),await this.fetchUsers(),this.roleId&&(this.isEdit=!0,await this.loadRole(this.roleId))}};const Vl=(0,h.A)(Ul,[["render",Al],["__scopeId","data-v-2d6614fc"]]);var Xl=Vl,$l={name:"RoleManagement",components:{RoleModal:Ys,RoleForm:Xl},data(){return{roles:[],modules:[],selectedModule:"all",showCreateRoleModal:!1,showEditRoleModal:!1,editingRoleId:null,isSidebarActive:!1}},computed:{filteredRoles(){return"all"===this.selectedModule?this.roles:this.roles.filter((e=>e.module==this.selectedModule))}},methods:{fetchRoles(){zo.get("/api/backend/roles/").then((e=>{this.roles=e.data.map((e=>({...e,selectedUser:e.users.length?e.users[0].id:null})))})).catch((e=>{console.error("Error fetching roles:",e)}))},fetchModules(){zo.get("/api/backend/modules/").then((e=>{this.modules=e.data.filter((e=>!e.is_deleted))})).catch((e=>{console.error("Error fetching modules:",e)}))},filterRolesByModule(){this.filteredRoles},openCreateRoleModal(){this.showCreateRoleModal=!0},closeCreateRoleModal(){this.showCreateRoleModal=!1},openEditRoleModal(e){this.editingRoleId=e,this.showEditRoleModal=!0},closeEditRoleModal(){this.showEditRoleModal=!1,this.editingRoleId=null},toggleStatus(e,t){zo.post(`/api/backend/toggle_role_status/${e}/`,{is_active:t}).then((e=>{e.data.success?this.fetchRoles():alert("åˆ‡æ›ç‹€æ…‹å¤±æ•—")})).catch((e=>{console.error("Error toggling status:",e),alert("åˆ‡æ›ç‹€æ…‹å¤±æ•—")}))},navigateToRoleManagement(){this.$router.push("/backend/role-management")},navigateToModuleManagement(){this.$router.push("/backend/module-management")},deleteRole(e){confirm("ç¢ºå®šè¦åˆªé™¤æ­¤è§’è‰²å—ï¼Ÿ")&&zo.post(`/api/backend/delete_role/${e}/`).then((()=>{this.fetchRoles()})).catch((e=>{console.error("Error deleting role:",e),alert("åˆªé™¤è§’è‰²å¤±æ•—")}))}},mounted(){this.fetchRoles(),this.fetchModules()}};const Fl=(0,h.A)($l,[["render",zs],["__scopeId","data-v-36c9f245"]]);var Il=Fl;const xl=e=>((0,n.Qi)("data-v-4c3eb9ff"),e=e(),(0,n.jt)(),e),Tl={class:"container"},ql=xl((()=>(0,n.Lk)("a",{href:"/backend/user-management",class:"back-button"},[(0,n.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n.Lk)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),(0,n.eW)(" å›åˆ°ç”¨æˆ¶ç®¡ç† ")],-1))),Dl=xl((()=>(0,n.Lk)("h1",null,"å¾…å¯©æ ¸åå–®",-1))),Bl={class:"pending-table"},Jl=xl((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"å§“å"),(0,n.Lk)("th",null,"é›»å­éƒµä»¶"),(0,n.Lk)("th",null,"é›»è©±è™Ÿç¢¼"),(0,n.Lk)("th",null,"ç”³è«‹æ™‚é–“"),(0,n.Lk)("th",null,"å¯©æ ¸")])],-1))),Nl=["onSubmit"],Ql=xl((()=>(0,n.Lk)("button",{type:"submit",class:"approve-btn"},"é–‹é€š",-1))),Wl=[Ql];function jl(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",Tl,[ql,Dl,(0,n.Lk)("table",Bl,[Jl,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.pendingUsers,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.id},[(0,n.Lk)("td",null,(0,r.v_)(t.username),1),(0,n.Lk)("td",null,(0,r.v_)(t.email),1),(0,n.Lk)("td",null,(0,r.v_)(t.phone),1),(0,n.Lk)("td",null,(0,r.v_)(t.date_joined?t.date_joined:"æœªçŸ¥"),1),(0,n.Lk)("td",null,[(0,n.Lk)("form",{onSubmit:(0,a.D$)((o=>e.approveUser(t.id)),["prevent"])},Wl,40,Nl)])])))),128))])])])}var zl={name:"PendingList",data(){return{pendingUsers:[]}},methods:{async fetchPendingUsers(){try{const e=await zo.get("/api/backend/pending-users/");this.pendingUsers=e.data}catch(e){console.error("Error fetching pending users:",e)}}},mounted(){this.fetchPendingUsers()}};const Ol=(0,h.A)(zl,[["render",jl],["__scopeId","data-v-4c3eb9ff"]]);var Hl=Ol;const Kl=e=>((0,n.Qi)("data-v-26951bdb"),e=e(),(0,n.jt)(),e),Zl={class:"container"},Gl=Kl((()=>(0,n.Lk)("h2",null,"ç·¨è¼¯ç”¨æˆ¶",-1))),Yl={class:"form-group"},er=Kl((()=>(0,n.Lk)("label",{for:"username"},"å§“å",-1))),tr={class:"form-group"},or=Kl((()=>(0,n.Lk)("label",{for:"email"},"é›»å­éƒµä»¶",-1))),ar={class:"form-group"},nr=Kl((()=>(0,n.Lk)("label",{for:"phone"},"é›»è©±è™Ÿç¢¼",-1))),sr={class:"form-group"},lr=Kl((()=>(0,n.Lk)("label",{for:"department"},"éƒ¨é–€",-1))),rr=Kl((()=>(0,n.Lk)("option",{value:""},"é¸æ“‡éƒ¨é–€",-1))),ir=["value"],dr={class:"form-group"},cr=Kl((()=>(0,n.Lk)("label",{for:"position"},"è·ä½",-1))),ur=Kl((()=>(0,n.Lk)("option",{value:""},"é¸æ“‡è·ä½",-1))),pr=["value"],mr={class:"form-group"},hr=Kl((()=>(0,n.Lk)("button",{type:"submit",class:"btn-save"},"å„²å­˜",-1)));function kr(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",Zl,[Gl,(0,n.Lk)("form",{onSubmit:t[6]||(t[6]=(0,a.D$)(((...e)=>i.updateUser&&i.updateUser(...e)),["prevent"]))},[(0,n.Lk)("div",Yl,[er,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>l.user.username=e),required:""},null,512),[[a.Jo,l.user.username]])]),(0,n.Lk)("div",tr,[or,(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>l.user.email=e),required:""},null,512),[[a.Jo,l.user.email]])]),(0,n.Lk)("div",ar,[nr,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"phone","onUpdate:modelValue":t[2]||(t[2]=e=>l.user.phone=e),required:""},null,512),[[a.Jo,l.user.phone]])]),(0,n.Lk)("div",sr,[lr,(0,n.bo)((0,n.Lk)("select",{id:"department","onUpdate:modelValue":t[3]||(t[3]=e=>l.user.department_id=e)},[rr,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.departments,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,r.v_)(e),9,ir)))),128))],512),[[a.u1,l.user.department_id]])]),(0,n.Lk)("div",dr,[cr,(0,n.bo)((0,n.Lk)("select",{id:"position","onUpdate:modelValue":t[4]||(t[4]=e=>l.user.position_id=e)},[ur,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.positions,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,r.v_)(e),9,pr)))),128))],512),[[a.u1,l.user.position_id]])]),(0,n.Lk)("div",mr,[hr,(0,n.Lk)("button",{type:"button",class:"btn-cancel",onClick:t[5]||(t[5]=(...e)=>i.cancelEdit&&i.cancelEdit(...e))},"å–æ¶ˆ")])],32)])}var br={name:"EditUser",data(){return{user:{username:"",email:"",phone:"",department_id:"",position_id:""},departments:["éŠ·å”®éƒ¨","äººåŠ›è³‡æºéƒ¨","è³‡è¨Šéƒ¨","æ¥­å‹™éƒ¨","è²¡å‹™éƒ¨"],positions:["ç¶“ç†","ä¸»ç®¡","å“¡å·¥"]}},methods:{fetchUser(){const e=this.$route.params.userId;zo.get(`/api/backend/users/${e}/`).then((e=>{this.user=e.data})).catch((e=>{console.error("Error fetching user:",e)}))},updateUser(){const e=this.$route.params.userId;zo.put(`/api/users/${e}/`,this.user).then((()=>{this.$router.push("/backend/user-management")})).catch((e=>{console.error("Error updating user:",e)}))},cancelEdit(){this.$router.push("/backend/user-management")}},mounted(){this.fetchUser()}};const fr=(0,h.A)(br,[["render",kr],["__scopeId","data-v-26951bdb"]]);var vr=fr;const Lr=e=>((0,n.Qi)("data-v-114ec4b6"),e=e(),(0,n.jt)(),e),gr={class:"container"},Cr=Lr((()=>(0,n.Lk)("label",{for:"module"},"é¸æ“‡æ¨¡çµ„:",-1))),yr=Lr((()=>(0,n.Lk)("option",{value:""},"-- é¸æ“‡æ¨¡çµ„ --",-1))),wr=["value"],_r=Lr((()=>(0,n.Lk)("label",{for:"role"},"é¸æ“‡è§’è‰²:",-1))),Mr=Lr((()=>(0,n.Lk)("option",{value:""},"-- é¸æ“‡è§’è‰² --",-1))),Er=["value"],Pr=Lr((()=>(0,n.Lk)("button",{type:"submit"},"ä¿å­˜",-1)));function Rr(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",gr,[(0,n.Lk)("h2",null,"åˆ†é…è§’è‰²å’Œæ¨¡çµ„çµ¦ "+(0,r.v_)(l.user.username),1),(0,n.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>i.assignRoleAndModule&&i.assignRoleAndModule(...e)),["prevent"]))},[Cr,(0,n.bo)((0,n.Lk)("select",{id:"module","onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedModule=e),onChange:t[1]||(t[1]=(...e)=>i.loadRoles&&i.loadRoles(...e))},[yr,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.modules,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,wr)))),128))],544),[[a.u1,l.selectedModule]]),_r,(0,n.bo)((0,n.Lk)("select",{id:"role","onUpdate:modelValue":t[2]||(t[2]=e=>l.selectedRole=e)},[Mr,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.roles,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,Er)))),128))],512),[[a.u1,l.selectedRole]]),Pr],32),(0,n.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.goBack&&i.goBack(...e))},"å›åˆ°ä¸Šä¸€é ")])}var Sr={name:"AssignRoleAndModule",data(){return{selectedModule:"",selectedRole:"",modules:[],roles:[],user:{}}},methods:{loadModules(){zo.get("/api/backend/get_modules/").then((e=>{this.modules=e.data})).catch((e=>{console.error("Error loading modules:",e)}))},loadRoles(){this.selectedModule?zo.get(`/api/backend/get_roles_by_module/${this.selectedModule}/`).then((e=>{this.roles=e.data,this.roles.some((e=>e.id===this.selectedRole))||(this.selectedRole="")})).catch((e=>{console.error("Error loading roles:",e)})):this.roles=[]},assignRoleAndModule(){const e=this.$route.params.userId;zo.post(`/api/backend/assign_role_and_module/${e}/`,{module:this.selectedModule,role:this.selectedRole}).then((e=>{e.data.success?(alert("ä¿å­˜æˆåŠŸ"),this.$router.push({name:"userManagement"})):alert("ä¿å­˜å¤±æ•—")})).catch((e=>{console.error("Error saving role and module:",e),alert("ä¿å­˜å¤±æ•—")}))},goBack(){this.$router.go(-1)},loadUser(){const e=this.$route.params.userId;zo.get(`/api/backend/users/${e}/`).then((e=>{this.user=e.data,console.log(this.user),this.selectedModule=this.user.module?this.user.module.id:"",this.selectedRole=this.user.roles.length>0?this.user.roles[0].id:"",this.selectedModule&&this.loadRoles()})).catch((e=>{console.error("è¼‰å…¥ç”¨æˆ¶è³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤:",e)}))}},mounted(){this.loadModules(),this.loadUser()}};const Ar=(0,h.A)(Sr,[["render",Rr],["__scopeId","data-v-114ec4b6"]]);var Ur=Ar;const Vr=e=>((0,n.Qi)("data-v-245fdfa5"),e=e(),(0,n.jt)(),e),Xr={class:"header"},$r=Vr((()=>(0,n.Lk)("h2",null,"æ¨¡çµ„ç®¡ç†",-1))),Fr={class:"btn-group"},Ir={class:"module-table"},xr=Vr((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"æ¨¡çµ„åç¨±"),(0,n.Lk)("th",null,"ç”¨æˆ¶æ•¸"),(0,n.Lk)("th",null,"æ“ä½œ")])],-1))),Tr=["onClick"],qr=["onClick"];function Dr(e,t,o,a,s,l){const i=(0,n.g2)("ModuleForm");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:(0,r.C4)(["container",{shifted:s.isSidebarActive}])},[(0,n.Lk)("div",Xr,[$r,(0,n.Lk)("div",Fr,[(0,n.Lk)("button",{id:"add-module-btn",class:"btn add-module-btn",onClick:t[0]||(t[0]=(...e)=>l.openCreateModuleModal&&l.openCreateModuleModal(...e))},"æ–°å¢æ¨¡çµ„"),(0,n.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=(...e)=>l.navigateToRoleManagement&&l.navigateToRoleManagement(...e))},"è§’è‰²"),(0,n.Lk)("button",{class:"btn",onClick:t[2]||(t[2]=(...e)=>l.navigateToModuleManagement&&l.navigateToModuleManagement(...e))},"æ¨¡çµ„")])]),(0,n.Lk)("table",Ir,[xr,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.modules,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("td",null,(0,r.v_)(e.name),1),(0,n.Lk)("td",null,(0,r.v_)(l.getUserCount(e.id)),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"edit-btn",onClick:t=>l.openEditModuleModal(e.id,e.name)},"ç·¨è¼¯",8,Tr),(0,n.Lk)("button",{class:"delete-btn",onClick:t=>l.deleteModule(e.id)},"åˆªé™¤",8,qr)])])))),128))])]),s.showCreateModuleModal?((0,n.uX)(),(0,n.Wv)(i,{key:0,onClose:l.closeCreateModuleModal,onCreate:l.createModule},null,8,["onClose","onCreate"])):(0,n.Q3)("",!0),s.showEditModuleModal?((0,n.uX)(),(0,n.Wv)(i,{key:1,moduleId:s.editModuleId,moduleName:s.editModuleName,onClose:l.closeEditModuleModal,onEdit:l.editModule},null,8,["moduleId","moduleName","onClose","onEdit"])):(0,n.Q3)("",!0)],2)])}const Br=e=>((0,n.Qi)("data-v-4b7b9413"),e=e(),(0,n.jt)(),e),Jr={class:"container"},Nr={class:"form-group"},Qr=Br((()=>(0,n.Lk)("label",{for:"module-name"},"æ¨¡çµ„åç¨±",-1))),Wr={type:"submit",class:"btn"};function jr(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",Jr,[(0,n.Lk)("h2",null,(0,r.v_)(o.moduleId?"ç·¨è¼¯æ¨¡çµ„":"æ–°å¢æ¨¡çµ„"),1),(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,n.Lk)("div",Nr,[Qr,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.localModuleName=e),id:"module-name",required:""},null,512),[[a.Jo,l.localModuleName]])]),(0,n.Lk)("button",Wr,(0,r.v_)(o.moduleId?"ä¿å­˜è®Šæ›´":"æ–°å¢"),1),(0,n.Lk)("button",{type:"button",class:"btn secondary",onClick:t[1]||(t[1]=(...e)=>i.close&&i.close(...e))},"å–æ¶ˆ")],32)])}var zr={name:"ModuleForm",props:{moduleId:{type:[String,Number],default:null},moduleName:{type:String,default:""}},data(){return{localModuleName:this.moduleName}},methods:{close(){this.$emit("close")},handleSubmit(){const e={name:this.localModuleName};this.moduleId?this.$emit("edit",e):this.$emit("create",e)}}};const Or=(0,h.A)(zr,[["render",jr],["__scopeId","data-v-4b7b9413"]]);var Hr=Or,Kr={name:"ModuleManagement",components:{ModuleForm:Hr},data(){return{modules:[],showCreateModuleModal:!1,showEditModuleModal:!1,newModuleName:"",editModuleName:"",editModuleId:null,isSidebarActive:!1}},methods:{async loadModules(){try{const e=await zo.get("/api/backend/modules/");console.log("Modules from backend:",e.data),this.modules=e.data.filter((e=>!e.is_deleted))||[]}catch(e){console.error("Error fetching modules:",e.response?e.response.data:e.message)}},openCreateModuleModal(){this.showCreateModuleModal=!0},closeCreateModuleModal(){this.showCreateModuleModal=!1},async createModule(e){try{const t=await zo.post("/api/backend/modules/",e);201===t.status?(this.loadModules(),this.closeCreateModuleModal(),alert("æ–°å¢æ¨¡çµ„æˆåŠŸ")):alert("æ–°å¢æ¨¡çµ„å¤±æ•—")}catch(t){console.error("Error creating module:",t.response?t.response.data:t.message),alert("æ–°å¢æ¨¡çµ„å¤±æ•—")}},openEditModuleModal(e,t){this.editModuleId=e,this.editModuleName=t,this.showEditModuleModal=!0},closeEditModuleModal(){this.showEditModuleModal=!1},async editModule(e){try{const t=await zo.put(`/api/backend/modules/${this.editModuleId}/`,e);200===t.status?(this.loadModules(),this.closeEditModuleModal(),alert("ç·¨è¼¯æ¨¡çµ„æˆåŠŸ")):alert("ç·¨è¼¯æ¨¡çµ„å¤±æ•—")}catch(t){console.error("Error editing module:",t.response?t.response.data:t.message),alert("ç·¨è¼¯æ¨¡çµ„å¤±æ•—")}},async deleteModule(e){try{const t=await zo.delete(`/api/backend/modules/${e}/`);console.log("Delete response:",t),204===t.status?(this.loadModules(),alert("åˆªé™¤æˆåŠŸ")):(alert("åˆªé™¤æ¨¡çµ„å¤±æ•—"),console.error("Error deleting module:",t.data.message))}catch(t){console.error("Error deleting module:",t.response?t.response.data:t.message),alert("åˆªé™¤æ¨¡çµ„å¤±æ•—")}},navigateToRoleManagement(){this.$router.push("/backend/role-management")},navigateToModuleManagement(){this.$router.push("/backend/module-management")},getUserCount(e){const t=this.modules.find((t=>t.id===e));return t?t.user_count:0},toggleSidebar(){this.isSidebarActive=!this.isSidebarActive}},created(){this.loadModules()}};const Zr=(0,h.A)(Kr,[["render",Dr],["__scopeId","data-v-245fdfa5"]]);var Gr=Zr;const Yr=e=>((0,n.Qi)("data-v-03df9c06"),e=e(),(0,n.jt)(),e),ei={class:"container"},ti=Yr((()=>(0,n.Lk)("h2",null,"æ–°å¢æ¬Šé™",-1))),oi={class:"form-group"},ai=Yr((()=>(0,n.Lk)("label",{for:"permission-name"},"åŠŸèƒ½åç¨±",-1))),ni={class:"form-group"},si=Yr((()=>(0,n.Lk)("h3",null,"æ¬Šé™",-1))),li={class:"checkbox-container"};function ri(e,t,o,s,l,r){return(0,n.uX)(),(0,n.CE)("div",ei,[ti,(0,n.Lk)("div",oi,[ai,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.newPermission.permission_name=e),id:"permission-name",required:""},null,512),[[a.Jo,l.newPermission.permission_name]])]),(0,n.Lk)("div",ni,[si,(0,n.Lk)("div",li,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>l.newPermission.can_add=e)},null,512),[[a.lH,l.newPermission.can_add]]),(0,n.eW)(" æ–°å¢")]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>l.newPermission.can_query=e)},null,512),[[a.lH,l.newPermission.can_query]]),(0,n.eW)(" æŸ¥è©¢")]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>l.newPermission.can_view=e)},null,512),[[a.lH,l.newPermission.can_view]]),(0,n.eW)(" æª¢è¦–")]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>l.newPermission.can_edit=e)},null,512),[[a.lH,l.newPermission.can_edit]]),(0,n.eW)(" ä¿®æ”¹")]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>l.newPermission.can_delete=e)},null,512),[[a.lH,l.newPermission.can_delete]]),(0,n.eW)(" åˆªé™¤")]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>l.newPermission.can_print=e)},null,512),[[a.lH,l.newPermission.can_print]]),(0,n.eW)(" åˆ—å°")]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>l.newPermission.can_export=e)},null,512),[[a.lH,l.newPermission.can_export]]),(0,n.eW)(" åŒ¯å‡º")]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>l.newPermission.can_maintain=e)},null,512),[[a.lH,l.newPermission.can_maintain]]),(0,n.eW)(" ç¶­è­·")])])]),(0,n.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>r.savePermission&&r.savePermission(...e))},"æ–°å¢"),(0,n.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>r.cancelPermission&&r.cancelPermission(...e))},"å–æ¶ˆ")])}var ii={data(){return{newPermission:{permission_name:"",can_add:!1,can_query:!1,can_view:!1,can_edit:!1,can_delete:!1,can_print:!1,can_export:!1,can_maintain:!1}}},methods:{async savePermission(){try{const e=await zo.post("/api/backend/role_permissions/",{...this.newPermission,role:this.$route.params.roleId});e.status>=200&&e.status<300?(alert("æ–°å¢æˆåŠŸ"),this.$emit("permission-saved"),this.$router.back()):alert("æ–°å¢å¤±æ•—")}catch(e){console.error("Error saving permission:",e.response?e.response.data:e.message),alert(`æ–°å¢å¤±æ•—: ${e.response?e.response.data.detail:e.message}`)}},cancelPermission(){this.$emit("permission-cancelled"),this.$router.back()}}};const di=(0,h.A)(ii,[["render",ri],["__scopeId","data-v-03df9c06"]]);var ci=di;const ui=e=>((0,n.Qi)("data-v-798f7cc6"),e=e(),(0,n.jt)(),e),pi={class:"search-container"},mi={class:"modal-content"},hi=ui((()=>(0,n.Lk)("label",{for:"userName"},"ç”¨æˆ¶:",-1))),ki=ui((()=>(0,n.Lk)("br",null,null,-1))),bi=ui((()=>(0,n.Lk)("br",null,null,-1))),fi=ui((()=>(0,n.Lk)("label",{for:"userAction"},"æ“ä½œ:",-1))),vi=ui((()=>(0,n.Lk)("br",null,null,-1))),Li=ui((()=>(0,n.Lk)("br",null,null,-1))),gi=ui((()=>(0,n.Lk)("label",{for:"userEmail"},"é›»å­éƒµä»¶:",-1))),Ci=ui((()=>(0,n.Lk)("br",null,null,-1))),yi=ui((()=>(0,n.Lk)("br",null,null,-1))),wi=ui((()=>(0,n.Lk)("label",{for:"timestamp"},"æ“ä½œæ™‚é–“:",-1))),_i=ui((()=>(0,n.Lk)("br",null,null,-1))),Mi=ui((()=>(0,n.Lk)("br",null,null,-1))),Ei=ui((()=>(0,n.Lk)("button",{type:"submit"},"æ–°å¢ç´€éŒ„",-1))),Pi={class:"history-container"},Ri=ui((()=>(0,n.Lk)("h2",null,"æ­·å²ç´€éŒ„",-1))),Si={class:"history-table",id:"history-table"},Ai=ui((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"ç·¨è™Ÿ"),(0,n.Lk)("th",null,"ç”¨æˆ¶"),(0,n.Lk)("th",null,"æ­·å²æ“ä½œ"),(0,n.Lk)("th",null,"é›»å­éƒµä»¶"),(0,n.Lk)("th",null,"æ“ä½œæ™‚é–“")])],-1)));function Ui(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:(0,r.C4)(["container",{shifted:l.isSidebarActive}])},[(0,n.Lk)("div",pi,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e),placeholder:"æŸ¥å°‹æ­·å²ç´€éŒ„..."},null,512),[[a.Jo,l.searchQuery]]),(0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.searchHistory&&i.searchHistory(...e))},"æŸ¥å°‹"),(0,n.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.refreshPage&&i.refreshPage(...e))},"é‡æ•´")]),l.isAddRecordModalVisible?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"modal",onClick:t[9]||(t[9]=(0,a.D$)((e=>i.closeModal("addRecordModal")),["self"]))},[(0,n.Lk)("div",mi,[(0,n.Lk)("span",{class:"close",onClick:t[3]||(t[3]=e=>i.closeModal("addRecordModal"))},"Ã—"),(0,n.Lk)("form",{onSubmit:t[8]||(t[8]=(0,a.D$)(((...e)=>i.addRecord&&i.addRecord(...e)),["prevent"]))},[hi,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.newRecord.userName=e),required:""},null,512),[[a.Jo,l.newRecord.userName]]),ki,bi,fi,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>l.newRecord.userAction=e),required:""},null,512),[[a.Jo,l.newRecord.userAction]]),vi,Li,gi,(0,n.bo)((0,n.Lk)("input",{type:"email","onUpdate:modelValue":t[6]||(t[6]=e=>l.newRecord.userEmail=e),required:""},null,512),[[a.Jo,l.newRecord.userEmail]]),Ci,yi,wi,(0,n.bo)((0,n.Lk)("input",{type:"datetime-local","onUpdate:modelValue":t[7]||(t[7]=e=>l.newRecord.timestamp=e),required:""},null,512),[[a.Jo,l.newRecord.timestamp]]),_i,Mi,Ei],32)])])):(0,n.Q3)("",!0),(0,n.Lk)("div",Pi,[Ri,(0,n.Lk)("table",Si,[Ai,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.filteredRecords,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("td",null,(0,r.v_)(t+1),1),(0,n.Lk)("td",null,(0,r.v_)(e.userName),1),(0,n.Lk)("td",null,(0,r.v_)(e.userAction),1),(0,n.Lk)("td",null,(0,r.v_)(e.userEmail),1),(0,n.Lk)("td",null,(0,r.v_)(e.timestamp),1)])))),128))])])])],2)])}var Vi={name:"HistoricalRecord",data(){return{searchQuery:"",isAddRecordModalVisible:!1,newRecord:{userName:"",userAction:"",userEmail:"",timestamp:""},records:[{userName:"å¼µä¸‰",userAction:"æ–°å¢è§’è‰²",userEmail:"zhangsan@example.com",timestamp:"2024-05-30 10:00"},{userName:"æå››",userAction:"åˆªé™¤è§’è‰²",userEmail:"lisi@example.com",timestamp:"2024-05-30 11:00"}],isSidebarActive:!1}},computed:{filteredRecords(){return this.records.filter((e=>Object.values(e).some((e=>e.toLowerCase().includes(this.searchQuery.toLowerCase())))))}},methods:{openModal(e){"addRecordModal"===e&&(this.isAddRecordModalVisible=!0)},closeModal(e){"addRecordModal"===e&&(this.isAddRecordModalVisible=!1)},addRecord(){this.records.push({...this.newRecord}),this.newRecord={userName:"",userAction:"",userEmail:"",timestamp:""},this.closeModal("addRecordModal")},searchHistory(){},refreshPage(){window.location.reload()},collectAndSendData(){}},mounted(){this.collectAndSendData()}};const Xi=(0,h.A)(Vi,[["render",Ui],["__scopeId","data-v-798f7cc6"]]);var $i=Xi;const Fi=e=>((0,n.Qi)("data-v-26826385"),e=e(),(0,n.jt)(),e),Ii={class:"app-container"},xi=Fi((()=>(0,n.Lk)("h1",null,"å€‹äººåå¥½ç®¡ç†",-1))),Ti={class:"form-group"},qi=Fi((()=>(0,n.Lk)("label",{for:"font-size"},"å­—é«”å¤§å°:",-1))),Di=Fi((()=>(0,n.Lk)("option",{value:"small"},"å°",-1))),Bi=Fi((()=>(0,n.Lk)("option",{value:"medium"},"ä¸­",-1))),Ji=Fi((()=>(0,n.Lk)("option",{value:"large"},"å¤§",-1))),Ni=[Di,Bi,Ji],Qi={class:"form-group"},Wi=Fi((()=>(0,n.Lk)("label",{for:"notification-settings"},"é€šçŸ¥:",-1))),ji=Fi((()=>(0,n.Lk)("option",{value:"on"},"å•Ÿç”¨",-1))),zi=Fi((()=>(0,n.Lk)("option",{value:"off"},"ä¸å•Ÿç”¨",-1))),Oi=[ji,zi],Hi={class:"form-group"},Ki=Fi((()=>(0,n.Lk)("label",{for:"auto-login"},"è‡ªå‹•ç™»å…¥:",-1))),Zi=Fi((()=>(0,n.Lk)("option",{value:"on"},"å•Ÿç”¨",-1))),Gi=Fi((()=>(0,n.Lk)("option",{value:"off"},"ä¸å•Ÿç”¨",-1))),Yi=[Zi,Gi],ed={class:"btn-container"},td=Fi((()=>(0,n.Lk)("button",{type:"submit",class:"btn"},"ä¿å­˜æ›´æ”¹",-1))),od={key:0,class:"success-message"},ad={key:1,class:"modal"},nd={class:"modal-content"},sd=Fi((()=>(0,n.Lk)("h2",null,"æ–°å¢å€‹äººåå¥½",-1))),ld={class:"form-group"},rd=Fi((()=>(0,n.Lk)("label",{for:"add-font-size"},"å­—é«”å¤§å°:",-1))),id=Fi((()=>(0,n.Lk)("option",{value:"small"},"å°",-1))),dd=Fi((()=>(0,n.Lk)("option",{value:"medium"},"ä¸­",-1))),cd=Fi((()=>(0,n.Lk)("option",{value:"large"},"å¤§",-1))),ud=[id,dd,cd],pd={class:"form-group"},md=Fi((()=>(0,n.Lk)("label",{for:"add-notifications"},"é€šçŸ¥:",-1))),hd=Fi((()=>(0,n.Lk)("option",{value:"on"},"å•Ÿç”¨",-1))),kd=Fi((()=>(0,n.Lk)("option",{value:"off"},"ä¸å•Ÿç”¨",-1))),bd=[hd,kd],fd={class:"form-group"},vd=Fi((()=>(0,n.Lk)("label",{for:"add-auto-login"},"è‡ªå‹•ç™»å…¥:",-1))),Ld=Fi((()=>(0,n.Lk)("option",{value:"on"},"å•Ÿç”¨",-1))),gd=Fi((()=>(0,n.Lk)("option",{value:"off"},"ä¸å•Ÿç”¨",-1))),Cd=[Ld,gd],yd={class:"btn-container"},wd=Fi((()=>(0,n.Lk)("button",{type:"submit",class:"btn"},"ä¿å­˜",-1))),_d=Fi((()=>(0,n.Lk)("h2",null,"æŸ¥è©¢å€‹äººåå¥½",-1))),Md={class:"form-group"},Ed=Fi((()=>(0,n.Lk)("label",{for:"query-font-size"},"å­—é«”å¤§å°:",-1))),Pd=Fi((()=>(0,n.Lk)("option",{value:""},"--é¸æ“‡--",-1))),Rd=Fi((()=>(0,n.Lk)("option",{value:"small"},"å°",-1))),Sd=Fi((()=>(0,n.Lk)("option",{value:"medium"},"ä¸­",-1))),Ad=Fi((()=>(0,n.Lk)("option",{value:"large"},"å¤§",-1))),Ud=[Pd,Rd,Sd,Ad],Vd={class:"form-group"},Xd=Fi((()=>(0,n.Lk)("label",{for:"query-notifications"},"é€šçŸ¥:",-1))),$d=Fi((()=>(0,n.Lk)("option",{value:""},"--é¸æ“‡--",-1))),Fd=Fi((()=>(0,n.Lk)("option",{value:"on"},"å•Ÿç”¨",-1))),Id=Fi((()=>(0,n.Lk)("option",{value:"off"},"ä¸å•Ÿç”¨",-1))),xd=[$d,Fd,Id],Td={class:"form-group"},qd=Fi((()=>(0,n.Lk)("label",{for:"query-auto-login"},"è‡ªå‹•ç™»å…¥:",-1))),Dd=Fi((()=>(0,n.Lk)("option",{value:""},"--é¸æ“‡--",-1))),Bd=Fi((()=>(0,n.Lk)("option",{value:"on"},"å•Ÿç”¨",-1))),Jd=Fi((()=>(0,n.Lk)("option",{value:"off"},"ä¸å•Ÿç”¨",-1))),Nd=[Dd,Bd,Jd],Qd=Fi((()=>(0,n.Lk)("div",{class:"btn-container"},[(0,n.Lk)("button",{type:"submit",class:"btn"},"æŸ¥è©¢")],-1))),Wd={key:2,class:"results"},jd=Fi((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"ID"),(0,n.Lk)("th",null,"å­—é«”å¤§å°"),(0,n.Lk)("th",null,"é€šçŸ¥"),(0,n.Lk)("th",null,"è‡ªå‹•ç™»å…¥")])],-1))),zd={key:3,class:"results"};function Od(e,t,o,s,l,i){return(0,n.uX)(),(0,n.CE)("div",Ii,[xi,(0,n.Lk)("form",{onSubmit:t[6]||(t[6]=(0,a.D$)(((...e)=>i.updatePreferences&&i.updatePreferences(...e)),["prevent"]))},[(0,n.Lk)("div",Ti,[qi,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.preferences.fontsize=e),id:"font-size"},Ni,512),[[a.u1,l.preferences.fontsize]])]),(0,n.Lk)("div",Qi,[Wi,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.preferences.notificationSettings=e),id:"notification-settings"},Oi,512),[[a.u1,l.preferences.notificationSettings]])]),(0,n.Lk)("div",Hi,[Ki,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.preferences.autoLogin=e),id:"auto-login"},Yi,512),[[a.u1,l.preferences.autoLogin]])]),(0,n.Lk)("div",ed,[td,(0,n.Lk)("button",{type:"button",class:"btn",onClick:t[3]||(t[3]=(...e)=>i.showAddModal&&i.showAddModal(...e))},"æ–°å¢"),(0,n.Lk)("button",{type:"button",class:"btn btn-delete",onClick:t[4]||(t[4]=(...e)=>i.deletePreference&&i.deletePreference(...e))},"åˆªé™¤"),(0,n.Lk)("button",{type:"button",class:"btn btn-cancel",onClick:t[5]||(t[5]=(...e)=>i.resetPreferences&&i.resetPreferences(...e))},"å–æ¶ˆæ›´æ”¹")])],32),l.successMessage?((0,n.uX)(),(0,n.CE)("div",od,"ä¿å­˜æˆåŠŸï¼")):(0,n.Q3)("",!0),l.showModal?((0,n.uX)(),(0,n.CE)("div",ad,[(0,n.Lk)("div",nd,[(0,n.Lk)("span",{class:"close",onClick:t[7]||(t[7]=(...e)=>i.closeAddModal&&i.closeAddModal(...e))},"Ã—"),sd,(0,n.Lk)("form",{onSubmit:t[12]||(t[12]=(0,a.D$)(((...e)=>i.addPreference&&i.addPreference(...e)),["prevent"]))},[(0,n.Lk)("div",ld,[rd,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.newPreference.fontsize=e),id:"add-font-size"},ud,512),[[a.u1,l.newPreference.fontsize]])]),(0,n.Lk)("div",pd,[md,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.newPreference.notificationSettings=e),id:"add-notifications"},bd,512),[[a.u1,l.newPreference.notificationSettings]])]),(0,n.Lk)("div",fd,[vd,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.newPreference.autoLogin=e),id:"add-auto-login"},Cd,512),[[a.u1,l.newPreference.autoLogin]])]),(0,n.Lk)("div",yd,[wd,(0,n.Lk)("button",{type:"button",class:"btn btn-cancel",onClick:t[11]||(t[11]=(...e)=>i.closeAddModal&&i.closeAddModal(...e))},"å–æ¶ˆ")])],32)])])):(0,n.Q3)("",!0),_d,(0,n.Lk)("form",{onSubmit:t[16]||(t[16]=(0,a.D$)(((...e)=>i.queryPreferences&&i.queryPreferences(...e)),["prevent"]))},[(0,n.Lk)("div",Md,[Ed,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.query.fontsize=e),id:"query-font-size"},Ud,512),[[a.u1,l.query.fontsize]])]),(0,n.Lk)("div",Vd,[Xd,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.query.notificationSettings=e),id:"query-notifications"},xd,512),[[a.u1,l.query.notificationSettings]])]),(0,n.Lk)("div",Td,[qd,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.query.autoLogin=e),id:"query-auto-login"},Nd,512),[[a.u1,l.query.autoLogin]])]),Qd],32),l.queryResults.length>0?((0,n.uX)(),(0,n.CE)("div",Wd,[(0,n.Lk)("table",null,[jd,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.queryResults,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.user_id},[(0,n.Lk)("td",null,(0,r.v_)(e.user_id),1),(0,n.Lk)("td",null,(0,r.v_)(e.fontsize),1),(0,n.Lk)("td",null,(0,r.v_)("on"===e.notificationSettings?"å•Ÿç”¨":"ä¸å•Ÿç”¨"),1),(0,n.Lk)("td",null,(0,r.v_)("on"===e.autoLogin?"å•Ÿç”¨":"ä¸å•Ÿç”¨"),1)])))),128))])])])):((0,n.uX)(),(0,n.CE)("div",zd,"æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„åå¥½è¨­ç½®"))])}var Hd={name:"PersonalPreference",data(){return{preferences:{user_id:null,fontsize:"",notificationSettings:"off",autoLogin:"off"},newPreference:{fontsize:"medium",notificationSettings:"off",autoLogin:"off"},query:{fontsize:"",notificationSettings:"",autoLogin:""},queryResults:[],successMessage:!1,showModal:!1,isSidebarActive:!1}},created(){this.loadPreferences()},methods:{loadPreferences(){ee.A.get("/preferences/get_preferences/").then((e=>{this.preferences=e.data})).catch((e=>{console.error("ç„¡æ³•å–å¾—åå¥½è¨­ç½®:",e)}))},updatePreferences(){ee.A.post("/preferences/update_preference/",this.preferences).then((e=>{"success"===e.data.status?this.showSuccessMessage():alert("ä¿å­˜å¤±æ•—")})).catch((e=>{console.error("ä¿å­˜åå¥½è¨­ç½®å¤±æ•—:",e)}))},showAddModal(){this.showModal=!0},closeAddModal(){this.showModal=!1},addPreference(){ee.A.post("/preferences/add_preference/",this.newPreference).then((e=>{"success"===e.data.status?(this.closeAddModal(),this.showSuccessMessage()):alert("æ–°å¢å¤±æ•—")})).catch((e=>{console.error("æ–°å¢åå¥½è¨­ç½®å¤±æ•—:",e)}))},deletePreference(){ee.A.post("/preferences/delete_preference/",{user_id:this.preferences.user_id}).then((e=>{"success"===e.data.status?this.showSuccessMessage():alert("åˆªé™¤å¤±æ•—")})).catch((e=>{console.error("åˆªé™¤åå¥½è¨­ç½®å¤±æ•—:",e)}))},resetPreferences(){this.loadPreferences()},queryPreferences(){let e="/preferences/query_preferences/?";this.query.fontsize&&(e+=`fontsize=${this.query.fontsize}&`),this.query.notificationSettings&&(e+=`notificationSettings=${this.query.notificationSettings}&`),this.query.autoLogin&&(e+=`autoLogin=${this.query.autoLogin}&`),ee.A.get(e).then((e=>{this.queryResults=e.data})).catch((e=>{console.error("æŸ¥è©¢åå¥½è¨­ç½®å¤±æ•—:",e)}))},showSuccessMessage(){this.successMessage=!0,setTimeout((()=>{this.successMessage=!1}),3e3)}}};const Kd=(0,h.A)(Hd,[["render",Od],["__scopeId","data-v-26826385"]]);var Zd=Kd;const Gd=e=>((0,n.Qi)("data-v-27cee45a"),e=e(),(0,n.jt)(),e),Yd={class:"profile-container"},ec=Gd((()=>(0,n.Lk)("h2",null,"å€‹äººè³‡æ–™",-1))),tc=Gd((()=>(0,n.Lk)("label",{for:"name"},"å§“åï¼š",-1))),oc=Gd((()=>(0,n.Lk)("label",{for:"username"},"å¸³è™Ÿï¼š",-1))),ac=Gd((()=>(0,n.Lk)("label",{for:"department"},"éƒ¨é–€ï¼š",-1))),nc=Gd((()=>(0,n.Lk)("label",{for:"position"},"è·ä½ï¼š",-1))),sc=Gd((()=>(0,n.Lk)("label",{for:"phone"},"é›»è©±ï¼š",-1))),lc=Gd((()=>(0,n.Lk)("label",{for:"email"},"é›»å­éƒµä»¶ï¼š",-1))),rc=Gd((()=>(0,n.Lk)("label",{for:"created"},"å»ºç«‹æ™‚é–“ï¼š",-1))),ic={key:0,id:"editModal",class:"modal"},dc={class:"modal-content"},cc=Gd((()=>(0,n.Lk)("h2",null,"ç·¨è¼¯å€‹äººè³‡æ–™",-1))),uc=Gd((()=>(0,n.Lk)("label",{for:"modal-name"},"å§“åï¼š",-1))),pc=Gd((()=>(0,n.Lk)("label",{for:"modal-username"},"å¸³è™Ÿï¼š",-1))),mc=Gd((()=>(0,n.Lk)("label",{for:"modal-department"},"éƒ¨é–€ï¼š",-1))),hc=Gd((()=>(0,n.Lk)("label",{for:"modal-position"},"è·ä½ï¼š",-1))),kc=Gd((()=>(0,n.Lk)("label",{for:"modal-phone"},"é›»è©±ï¼š",-1))),bc=Gd((()=>(0,n.Lk)("label",{for:"modal-email"},"é›»å­éƒµä»¶ï¼š",-1)));function fc(e,t,o,s,l,r){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Yd,[ec,tc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>l.profile.name=e)},null,512),[[a.Jo,l.profile.name]]),oc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[1]||(t[1]=e=>l.profile.username=e),disabled:""},null,512),[[a.Jo,l.profile.username]]),ac,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"department","onUpdate:modelValue":t[2]||(t[2]=e=>l.profile.department=e)},null,512),[[a.Jo,l.profile.department]]),nc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"position","onUpdate:modelValue":t[3]||(t[3]=e=>l.profile.position=e)},null,512),[[a.Jo,l.profile.position]]),sc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"phone","onUpdate:modelValue":t[4]||(t[4]=e=>l.profile.phone=e)},null,512),[[a.Jo,l.profile.phone]]),lc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"email","onUpdate:modelValue":t[5]||(t[5]=e=>l.profile.email=e)},null,512),[[a.Jo,l.profile.email]]),rc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"created","onUpdate:modelValue":t[6]||(t[6]=e=>l.profile.created=e),disabled:""},null,512),[[a.Jo,l.profile.created]]),(0,n.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>r.openModal&&r.openModal(...e))},"ç·¨è¼¯"),(0,n.Lk)("button",{class:"logout-btn",onClick:t[8]||(t[8]=(...e)=>r.logout&&r.logout(...e))},"ç™»å‡º")]),l.showModal?((0,n.uX)(),(0,n.CE)("div",ic,[(0,n.Lk)("div",dc,[(0,n.Lk)("span",{class:"close",onClick:t[9]||(t[9]=(...e)=>r.closeModal&&r.closeModal(...e))},"Ã—"),cc,uc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"modal-name","onUpdate:modelValue":t[10]||(t[10]=e=>l.editProfile.name=e)},null,512),[[a.Jo,l.editProfile.name]]),pc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"modal-username","onUpdate:modelValue":t[11]||(t[11]=e=>l.editProfile.username=e),disabled:""},null,512),[[a.Jo,l.editProfile.username]]),mc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"modal-department","onUpdate:modelValue":t[12]||(t[12]=e=>l.editProfile.department=e)},null,512),[[a.Jo,l.editProfile.department]]),hc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"modal-position","onUpdate:modelValue":t[13]||(t[13]=e=>l.editProfile.position=e)},null,512),[[a.Jo,l.editProfile.position]]),kc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"modal-phone","onUpdate:modelValue":t[14]||(t[14]=e=>l.editProfile.phone=e)},null,512),[[a.Jo,l.editProfile.phone]]),bc,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"modal-email","onUpdate:modelValue":t[15]||(t[15]=e=>l.editProfile.email=e)},null,512),[[a.Jo,l.editProfile.email]]),(0,n.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>r.saveProfile&&r.saveProfile(...e))},"ä¿å­˜")])])):(0,n.Q3)("",!0)])}var vc={name:"PersonalProfile",data(){return{profile:{name:"",username:"",department:"",position:"",phone:"",email:"",created:""},editProfile:{name:"",username:"",department:"",position:"",phone:"",email:""},showModal:!1,isSidebarActive:!1}},created(){this.getProfile()},methods:{getProfile(){ee.A.get("/api/backend/profile/").then((e=>{this.profile=e.data,this.profile.department=e.data.department_id,this.profile.position=e.data.position_id,this.profile.created=e.data.date_joined})).catch((e=>{console.error("ç„¡æ³•å–å¾—å€‹äººè³‡æ–™:",e)}))},openModal(){this.editProfile={...this.profile},this.showModal=!0},closeModal(){this.showModal=!1},saveProfile(){ee.A.post("/api/backend/profile/",this.editProfile).then((()=>{this.profile={...this.editProfile},this.closeModal(),alert("å€‹äººè³‡æ–™å·²æ›´æ–°")})).catch((e=>{console.error("ç„¡æ³•æ›´æ–°å€‹äººè³‡æ–™:",e)}))},logout(){ee.A.post("/api/backend/logout/").then((()=>{window.location.href="/frontend/login/"})).catch((e=>{console.error("ç„¡æ³•ç™»å‡º:",e)}))},toggleSidebar(){this.isSidebarActive=!this.isSidebarActive}}};const Lc=(0,h.A)(vc,[["render",fc],["__scopeId","data-v-27cee45a"]]);var gc=Lc;const Cc=[{path:"/",redirect:"/frontend/login"},{path:"/frontend/login",name:"FrontendLogin",component:ae,meta:{hideNavbar:!0,hideSidebar:!0}},{path:"/frontend/register",name:"FrontendRegister",component:Ce,meta:{hideNavbar:!0,hideSidebar:!0}},{path:"/frontend/forgot_password",name:"FrontendForgetPassword",component:Ae,meta:{hideNavbar:!0,hideSidebar:!0}},{path:"/frontend/home",name:"é¦–é ",component:at},{path:"/frontend/profile",name:"å€‹äººè³‡è¨Š",component:ht},{path:"/frontend/accountsettings",name:"å¸³è™Ÿè¨­å®š",component:Pt},{path:"/frontend/changepassword",name:"ä¿®æ”¹å¯†ç¢¼",component:Jt},{path:"/frontend/preferences",name:"åå¥½è¨­å®š",component:_o},{path:"/frontend/historydetails",name:"æ­·å²ç´€éŒ„è©³æƒ…",component:ua},{path:"/frontend/detail/:id",name:"æ­·å²ç´€éŒ„è©³æƒ…",component:ua},{path:"/frontend/history",name:"æ­·å²ç´€éŒ„",component:Ko},{path:"/frontend/reset_password",name:"ResetPassword",component:Sa,meta:{hideNavbar:!0,hideSidebar:!0}},{path:"/backend/login",name:"BackendLogin",component:ja,meta:{hideSidebar:!0}},{path:"/backend/register",name:"BackendRegister",component:un},{path:"/backend/forgetpassword",name:"BackendForgetPassword",component:gn},{path:"/backend/management",name:"BackendManagement",component:An},{path:"/backend/dashboard",name:"BackendDashboard",component:cs},{path:"/backend/dashboard",name:"BackendDashboard",component:cs},{path:"/backend/user-management",name:"BackendUserManagement",component:As},{path:"/backend/role-management",name:"BackendRoleManagement",component:Il},{path:"/backend/pending_list",name:"BackendPendingList",component:Hl},{path:"/backend/edit_user/:userId",name:"BackendEditUser",component:vr},{path:"/backend/assign_role/:userId",name:"BackendAssignRole",component:Ur},{path:"/backend/module-management",name:"BackendModuleManagement",component:Gr},{path:"/backend/create_role",name:"BackendCreateRole",component:Xl},{path:"/backend/edit_role/:roleId",name:"BackendEditRole",component:Xl},{path:"/backend/create-module",name:"BackendCreateModule",component:Hr},{path:"/backend/edit_module/:moduleId",name:"BackendEditModule",component:Hr},{path:"/backend/role_permissions/:roleId",name:"BackendRolePermissions",component:ci},{path:"/backend/history",name:"BackendHistory",component:$i},{path:"/backend/preferences",name:"BackendPreference",component:Zd},{path:"/backend/profile",name:"BackendProfile",component:gc}],yc=(0,D.aE)({history:(0,D.LA)(),routes:Cc});var wc=yc,_c=o(782);const Mc=(0,_c.y$)({state:{token:null,user:null},mutations:{setToken(e,t){e.token=t},setUser(e,t){e.user=t}},actions:{setToken({commit:e},t){e("setToken",t)},setUser({commit:e},t){e("setUser",t)}}});var Ec=Mc,Pc=o(8950),Rc=o(292),Sc=o(2353);const Ac=(0,a.Ef)(q);Ac.use(wc),Ac.use(Ec),Ac.component("font-awesome-icon",Rc.gc),Pc.Yv.add(Sc.X7I);const Uc=window.location.pathname.startsWith("/admin");Uc&&(Ac.config.globalProperties.$axios=zo),Ac.mount("#app")}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,a,n,s){if(!a){var l=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],s=e[c][2];for(var r=!0,i=0;i<a.length;i++)(!1&s||l>=s)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(r=!1,s<l&&(l=s));if(r){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,n,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={57:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,s,l=a[0],r=a[1],i=a[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(n in r)o.o(r,n)&&(o.m[n]=r[n]);if(i)var c=i(o)}for(t&&t(a);d<l.length;d++)s=l[d],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(c)},a=self["webpackChunkadmin_frontend"]=self["webpackChunkadmin_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(9578)}));a=o.O(a)})();
//# sourceMappingURL=index.413e213b.js.map